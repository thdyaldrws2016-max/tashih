<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>AI Grader Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:sans-serif;background:#f4f6f8;margin:0}
.container{max-width:480px;margin:auto;padding:15px}
input,textarea,button{
 width:100%;padding:12px;margin:6px 0;
 border-radius:8px;border:1px solid #ddd;font-size:16px
}
button{background:#6200ee;color:#fff;font-weight:bold}
button.gray{background:#555}
button.danger{background:#e74c3c}
h2{text-align:center}
.hidden{display:none}
canvas{display:none}
</style>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import {
  getFirestore,
  collection,
  addDoc,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

/* ğŸ”‘ Ù…ÙØ§ØªÙŠØ­ Firebase (ÙƒÙ…Ø§ Ù‡ÙŠ) */
const firebaseConfig = {
  apiKey: "AIzaSyBseqoPupcfWP_ShLCtXRwUWYIj_FMwPgY",
  authDomain: "sameigrader.firebaseapp.com",
  projectId: "sameigrader",
  storageBucket: "sameigrader.firebasestorage.app",
  messagingSenderId: "191636766460",
  appId: "1:191636766460:web:fa05aea47d58410674a179"
};

/* ØªØ´ØºÙŠÙ„ Firebase */
const app = initializeApp(firebaseConfig);

/* ØªØ´ØºÙŠÙ„ Firestore */
const db = getFirestore(app);

/* Ø­ÙØ¸ Ù†ØªÙŠØ¬Ø© */
async function saveResult(studentName, score) {
  try {
    await addDoc(collection(db, "results"), {
      name: studentName,
      score: score,
      createdAt: serverTimestamp()
    });
    alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©");
  } catch (e) {
    alert("âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸");
    console.error(e);
  }
}

/* Ù„Ø¥ØªØ§Ø­Ø© Ø§Ù„Ø¯Ø§Ù„Ø© ÙÙŠ Console */
window.saveResult = saveResult;
</script>
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* UI */
const loginBox = document.getElementById("login");
const appBox = document.getElementById("app");

/* AUTH */
loginBtn.onclick = () =>
 signInWithEmailAndPassword(auth,email.value,password.value)
 .catch(e=>alert(e.message));

registerBtn.onclick = () =>
 createUserWithEmailAndPassword(auth,email.value,password.value)
 .catch(e=>alert(e.message));

logout.onclick = () => signOut(auth);

onAuthStateChanged(auth,u=>{
 loginBox.classList.toggle("hidden",!!u);
 appBox.classList.toggle("hidden",!u);
});

/* OMR SETUP */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

const OMR={
 startX:120,startY:220,gapY:30,gapX:30,r:10,
 choices:["A","B","C","D"]
};

const MODEL={x:120,y:150,gap:40,r:10,labels:["A","B"]};

function darkness(x,y,r){
 let s=0,c=0;
 for(let dx=-r;dx<=r;dx++)
 for(let dy=-r;dy<=r;dy++){
  if(dx*dx+dy*dy<=r*r){
   let p=ctx.getImageData(x+dx,y+dy,1,1).data[0];
   s+=p;c++;
  }
 }
 return s/c;
}

function detectModel(){
 let best={v:999,m:"A"};
 MODEL.labels.forEach((m,i)=>{
  let d=darkness(MODEL.x+i*MODEL.gap,MODEL.y,MODEL.r);
  if(d<best.v)best={v:d,m};
 });
 return best.v<200?best.m:"A";
}

function readOMR(qCount){
 let ans=[];
 for(let i=0;i<qCount;i++){
  let best={v:999,c:""};
  OMR.choices.forEach((c,j)=>{
   let d=darkness(
    OMR.startX+j*OMR.gapX,
    OMR.startY+i*OMR.gapY,
    OMR.r
   );
   if(d<best.v)best={v:d,c};
  });
  ans.push(best.v<200?best.c:"");
 }
 return ans;
}

const map={A:i=>i,B:i=>i%2?i-1:i+1};
const applyModel=(a,m)=>a.map((_,i)=>a[map[m](i)]||"");

/* CAMERA */
camera.onchange=e=>{
 const img=new Image();
 img.onload=()=>{
  canvas.width=img.width;
  canvas.height=img.height;
  ctx.drawImage(img,0,0);

  const model=detectModel();
  const key=answersKey.value.split(",");
  const raw=readOMR(key.length);
  const final=applyModel(raw,model);

  studentAnswers.value=final.join(",");
  alert("ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù†Ù…ÙˆØ°Ø¬ "+model);
 };
 img.src=URL.createObjectURL(e.target.files[0]);
};

/* GRADING */
grade.onclick=async()=>{
 const key=answersKey.value.split(",");
 const st=studentAnswers.value.split(",");
 let score=0;
 key.forEach((a,i)=>{
  if(a.trim().toLowerCase()===st[i]?.trim().toLowerCase())score++;
 });
 let percent=Math.round(score/key.length*100);

 await addDoc(collection(db,"results"),{
  student:student.value,
  score:percent,
  date:new Date().toLocaleDateString()
 });
 load();
};

/* RESULTS */
async function load(){
 results.innerHTML="";
 const snap=await getDocs(collection(db,"results"));
 snap.forEach(d=>{
  let r=d.data();
  results.innerHTML+=`<p>${r.student} â€” ${r.score}%</p>`;
 });
}
load();
</script>
</head>

<body>
<div class="container">

<section id="login">
<h2>ğŸ” Ø¯Ø®ÙˆÙ„</h2>
<input id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯">
<input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
<button id="registerBtn" class="gray">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
</section>

<section id="app" class="hidden">
<h2>ğŸ“Š AI Grader Pro</h2>

<input id="answersKey" placeholder="Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ© A,B,C">
<input id="student" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">
<textarea id="studentAnswers" placeholder="Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨"></textarea>

<input type="file" accept="image/*" capture="environment" id="camera">

<button id="grade">âœ… ØªØµØ­ÙŠØ­</button>
<div id="results"></div>
<button id="logout" class="danger">Ø®Ø±ÙˆØ¬</button>
</section>

<canvas id="canvas"></canvas>
</div>
</body>
</html>
Ø£Ø±Ù‰ Ø¹Ø¯Ø© Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ. Ø¥Ù„ÙŠÙƒ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØµØ­Ø­Ø© Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª:

html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>AI Grader Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:sans-serif;background:#f4f6f8;margin:0}
.container{max-width:480px;margin:auto;padding:15px}
input,textarea,button{
 width:100%;padding:12px
Ù…Ø§Ù‡ÙŠ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ 
Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚:
1. Ø®Ø·Ø£ ÙÙŠ ØªØ±ÙƒÙŠØ¨ Firebase JavaScript:
javascript
// ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ØªÙƒØ±Ø§Ø± ØºÙŠØ± ØµØ­ÙŠØ­
const app = initializeApp(firebaseConfig);
const auth = getAuth(app); // getAuth Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯Ù‡Ø§
const db = getFirestore(app); // Ù…ÙƒØ±Ø±
2. ÙˆØ¸Ø§Ø¦Ù Firebase ØºÙŠØ± Ù…Ø³ØªÙˆØ±Ø¯Ø©:
Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ­Ø¯Ø§Øª Firebase Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©:

getAuth

signInWithEmailAndPassword

createUserWithEmailAndPassword

signOut

onAuthStateChanged

getDocs

3. Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:
Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù…Ø«Ù„ loginBtnØŒ registerBtnØŒ logoutØŒ cameraØŒ gradeØŒ answersKeyØŒ studentØŒ studentAnswersØŒ results ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù‚Ø¨Ù„ ØªØ¹Ø±ÙŠÙÙ‡Ø§

Ù„Ù… ÙŠØªÙ… ØªØ¹Ø±ÙŠÙÙ‡Ø§ Ø¨Ù€ document.getElementById()

4. Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù€ script:
ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ </script> ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ Ù…Ø¹ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„ÙƒÙˆØ¯

5. Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªÙ‡ÙŠØ¦Ø© Ù„Ù„Ø¹Ù†Ø§ØµØ± DOM:
javascript
// ÙƒØ§Ù† ÙŠÙ†Ù‚Øµ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯:
const loginBtn = document.getElementById("loginBtn");
const registerBtn = document.getElementById("registerBtn");
// Ø¥Ù„Ø®...
6. Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¯Ø§Ù„Ø© applyModel:
javascript
const map={A:i=>i,B:i=>i%2?i-1:i+1};
// ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ³Ø¨Ø¨ Ù…Ø´Ø§ÙƒÙ„ Ø¹Ù†Ø¯Ù…Ø§ i=0
7. Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªØ¹Ø±ÙŠÙ Ù„Ù€ load function ÙÙŠ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„ØµØ­ÙŠØ­
8. ØªØ¹Ø±ÙŠÙØ§Øª JavaScript Ø¨Ø¹Ø¯ Ø¥ØºÙ„Ø§Ù‚ tag Ø§Ù„Ù€ script:
javascript
</script>
const app = initializeApp(firebaseConfig); // Ø®Ø·Ø£ - Ø¨Ø¹Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù€ script
9. Ù†Ø³Ø® Ù…ØªÙƒØ±Ø±Ø© Ù„Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯:
const app = initializeApp(firebaseConfig); Ù…ÙƒØ±Ø±Ø©

const db = getFirestore(app); Ù…ÙƒØ±Ø±Ø©

10. Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ event listeners Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©:
Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© DOMContentLoaded Ø£Ùˆ ÙˆØ¶Ø¹ Ø§Ù„Ù€ script ÙÙŠ Ù†Ù‡Ø§ÙŠØ© body

11. Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¯Ø§Ù„Ø© darkness:
ØªØ³ØªØ®Ø¯Ù… getImageData Ø¨Ø¯ÙˆÙ† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¯ÙˆØ¯ canvas

12. Ø¹Ø¯Ù… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØµÙˆØ±Ø©:
Ù„Ø§ ÙŠÙˆØ¬Ø¯ try-catch Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©

Ù‡Ø°Ù‡ Ø£Ù‡Ù… Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØµØ­ÙŠØ­ Ù„ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.

ØµØ­Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ­Ø³Ù†Ù‡ Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆØ§Ø¶Øº
ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙŠÙƒÙˆÙ† Ø¹Ù† Ø·Ø±ÙŠÙ‚ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆØ§Ù„ Ø´Ø§Ø´Ø© ÙƒØ§Ù…Ù„Ø©Ø§Ùˆ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ù…Ø³Ø­ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ø¹Ø¨Ø± Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ ÙˆÙƒØ°Ù„Ùƒ Ø§ØªØ±Ùƒ Ù„Ù„Ù…Ø¹Ù„Ù… Ø­Ø±ÙŠØ© Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ù† ÙƒÙ„ Ù†ÙˆØ¹ ÙˆØ§Ø¶Ø¨Ø· ÙˆØ±Ù‚Ø© Ø§Ù„Ø§Ø¬Ø§Ø¨Ø© Ø¨Ø­ÙŠØ« ØªØªØ³Ø¹ Ø¥Ù„Ù‰  Ù¨Ù  Ø³Ø¤Ø§Ù„ ÙˆØºÙŠØ± Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¥Ù„Ù‰ SamieGrade 
SamieGrade - Ù†Ø¸Ø§Ù… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø°ÙƒÙŠ
html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamieGrade - Ù†Ø¸Ø§Ù… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 3px solid var(--primary);
        }

        .logo {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .header h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 2px solid var(--light);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h2 {
            color: var(--primary);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary);
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2 i {
            color: var(--secondary);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--dark);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .form-control {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--secondary) 0%, #2980b9 100%);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2980b9 0%, var(--secondary) 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #219653 100%);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #219653 0%, var(--success) 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #c0392b 100%);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #c0392b 0%, var(--danger) 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #e67e22 100%);
            color: white;
        }

        .btn-warning:hover {
            background: linear-gradient(135deg, #e67e22 0%, var(--warning) 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
        }

        .btn-outline:hover {
            background: var(--secondary);
            color: white;
        }

        .hidden {
            display: none !important;
        }

        .row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .preview-container {
            text-align: center;
            margin: 30px 0;
        }

        #previewCanvas {
            max-width: 100%;
            height: auto;
            border: 3px solid var(--primary);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background: white;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-box {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid var(--light);
        }

        .stat-box .number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .stat-box .label {
            color: var(--gray);
            font-size: 1rem;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .results-table th {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: right;
            font-weight: 600;
        }

        .results-table td {
            padding: 20px;
            border-bottom: 1px solid #eee;
            color: var(--dark);
        }

        .results-table tr:hover {
            background: #f8f9fa;
        }

        .grade-badge {
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .grade-excellent {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success);
        }

        .grade-good {
            background: rgba(52, 152, 219, 0.1);
            color: var(--secondary);
        }

        .grade-average {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning);
        }

        .grade-poor {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger);
        }

        .upload-area {
            border: 3px dashed var(--secondary);
            border-radius: 20px;
            padding: 60px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(52, 152, 219, 0.05);
        }

        .upload-area:hover {
            background: rgba(52, 152, 219, 0.1);
            border-color: var(--primary);
        }

        .upload-area i {
            font-size: 4rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .upload-area p {
            color: var(--dark);
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .upload-area span {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            border-radius: 25px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .alert {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(39, 174, 96, 0.1);
            border: 2px solid var(--success);
            color: var(--success);
        }

        .alert-error {
            background: rgba(231, 76, 60, 0.1);
            border: 2px solid var(--danger);
            color: var(--danger);
        }

        .loading {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--secondary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .row {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .card {
                padding: 20px;
            }
        }

        .camera-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 999;
        }

        .camera-controls {
            position: fixed;
            bottom: 30px;
            left: 0;
            width: 100%;
            text-align: center;
            z-index: 1000;
        }

        .camera-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h1>SamieGrade</h1>
            <p>Ù†Ø¸Ø§Ù… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø°ÙƒÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
        </div>

        <!-- Login Section -->
        <div id="loginSection" class="card">
            <h2><i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <div class="form-group">
                <label><i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                <input type="email" id="email" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            </div>
            <div class="form-group">
                <label><i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" id="password" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            <button id="loginBtn" class="btn btn-primary">
                <i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            </button>
            <button id="registerBtn" class="btn btn-outline">
                <i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
            </button>
        </div>

        <!-- Main App Section -->
        <div id="appSection" class="hidden">
            <!-- Navigation -->
            <div class="card">
                <div class="row">
                    <button id="setupTestBtn" class="btn btn-primary">
                        <i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                    </button>
                    <button id="scanBtn" class="btn btn-success">
                        <i class="fas fa-camera"></i> Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
                    </button>
                    <button id="resultsBtn" class="btn btn-warning">
                        <i class="fas fa-chart-bar"></i> Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                    </button>
                    <button id="logoutBtn" class="btn btn-danger">
                        <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                    </button>
                </div>
            </div>

            <!-- Test Setup -->
            <div id="testSetup" class="card">
                <h2><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
                <div class="form-group">
                    <label><i class="fas fa-file-alt"></i> Ø§Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</label>
                    <input type="text" id="testName" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-question-circle"></i> Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ø­ØªÙ‰ 80 Ø³Ø¤Ø§Ù„)</label>
                    <input type="number" id="totalQuestions" class="form-control" min="1" max="80" value="40" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-key"></i> Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ©</label>
                    <textarea id="correctAnswers" class="form-control" rows="4" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ© (Ù…Ø«Ø§Ù„: A,B,C,D,A,B,...)"></textarea>
                    <small style="color: var(--gray); margin-top: 5px; display: block;">
                        Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„ (A,B,C,D)
                    </small>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-print"></i> Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</label>
                    <div class="upload-area" onclick="generateAnswerSheet()">
                        <i class="fas fa-download"></i>
                        <p>Ø§Ù†Ù‚Ø± Ù„ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</p>
                        <span>Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù…ÙˆØ°Ø¬ ÙŠØªØ³Ø¹ Ù„Ù€ <span id="sheetCapacity">80</span> Ø³Ø¤Ø§Ù„</span>
                    </div>
                </div>
                
                <button id="saveTestBtn" class="btn btn-success">
                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </button>
            </div>

            <!-- Scan Section -->
            <div id="scanSection" class="card hidden">
                <h2><i class="fas fa-camera"></i> Ù…Ø³Ø­ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
                
                <div class="form-group">
                    <label><i class="fas fa-user-graduate"></i> Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label>
                    <input type="text" id="studentName" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">
                </div>
                
                <div class="upload-area" onclick="openCamera()">
                    <i class="fas fa-camera"></i>
                    <p>Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</p>
                    <span>Ø£Ùˆ Ù‚Ù… Ø¨Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</span>
                </div>
                
                <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-scanner"></i>
                    <p>Ø±ÙØ¹ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ</p>
                    <span>JPG, PNG, PDF - Ø­ØªÙ‰ 10MB</span>
                </div>
                
                <input type="file" id="fileInput" accept="image/*,.pdf" class="hidden">
                
                <div class="preview-container hidden" id="previewContainer">
                    <canvas id="previewCanvas"></canvas>
                    <button onclick="processImage()" class="btn btn-success" style="margin-top: 20px;">
                        <i class="fas fa-play"></i> Ø¨Ø¯Ø¡ Ø§Ù„ØªØµØ­ÙŠØ­
                    </button>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="card hidden">
                <h2><i class="fas fa-chart-bar"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="number" id="totalStudents">0</div>
                        <div class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨</div>
                    </div>
                    <div class="stat-box">
                        <div class="number" id="averageScore">0%</div>
                        <div class="label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</div>
                    </div>
                    <div class="stat-box">
                        <div class="number" id="highestScore">0%</div>
                        <div class="label">Ø£Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø©</div>
                    </div>
                    <div class="stat-box">
                        <div class="number" id="lowestScore">0%</div>
                        <div class="label">Ø£Ù‚Ù„ Ø¯Ø±Ø¬Ø©</div>
                    </div>
                </div>
                
                <div class="form-group" style="margin-top: 30px;">
                    <button onclick="exportToExcel()" class="btn btn-success">
                        <i class="fas fa-file-excel"></i> ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel
                    </button>
                    <button onclick="printResults()" class="btn btn-primary">
                        <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                    </button>
                </div>
                
                <div id="resultsContainer">
                    <!-- Results will be loaded here -->
                </div>
            </div>

            <!-- Current Results Display -->
            <div id="currentResult" class="card hidden">
                <h2><i class="fas fa-star"></i> Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØµØ­ÙŠØ­</h2>
                <div id="resultDetails"></div>
            </div>
        </div>
    </div>

    <!-- Camera Modal -->
    <div id="cameraModal" class="modal hidden">
        <div class="close-modal" onclick="closeCamera()">
            <i class="fas fa-times"></i>
        </div>
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 20px;">
                <i class="fas fa-camera"></i> Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©
            </h2>
            <div class="camera-overlay">
                <video id="cameraVideo" class="camera-video" autoplay></video>
                <canvas id="cameraCanvas" class="hidden"></canvas>
            </div>
            <div class="camera-controls">
                <button onclick="capturePhoto()" class="btn btn-success" style="width: 70px; height: 70px; border-radius: 50%; margin: 0 20px;">
                    <i class="fas fa-camera fa-2x"></i>
                </button>
                <button onclick="toggleFlash()" class="btn btn-warning" style="width: auto; padding: 10px 20px; border-radius: 25px;">
                    <i class="fas fa-bolt"></i> ÙÙ„Ø§Ø´
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="modal hidden">
        <div class="modal-content" style="text-align: center; padding: 60px;">
            <div class="loading" style="margin: 0 auto 30px;"></div>
            <h3 style="color: var(--primary);">Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø©...</h3>
            <p style="color: var(--gray); margin-top: 10px;">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBseqoPupcfWP_ShLCtXRwUWYIj_FMwPgY",
            authDomain: "sameigrader.firebaseapp.com",
            projectId: "sameigrader",
            storageBucket: "sameigrader.firebasestorage.app",
            messagingSenderId: "191636766460",
            appId: "1:191636766460:web:fa05aea47d58410674a179"
        };

        // DOM Elements
        const elements = {
            // Login Section
            loginSection: document.getElementById('loginSection'),
            appSection: document.getElementById('appSection'),
            email: document.getElementById('email'),
            password: document.getElementById('password'),
            loginBtn: document.getElementById('loginBtn'),
            registerBtn: document.getElementById('registerBtn'),
            logoutBtn: document.getElementById('logoutBtn'),
            
            // App Sections
            testSetup: document.getElementById('testSetup'),
            scanSection: document.getElementById('scanSection'),
            resultsSection: document.getElementById('resultsSection'),
            
            // Test Setup
            testName: document.getElementById('testName'),
            totalQuestions: document.getElementById('totalQuestions'),
            correctAnswers: document.getElementById('correctAnswers'),
            saveTestBtn: document.getElementById('saveTestBtn'),
            
            // Scan Section
            studentName: document.getElementById('studentName'),
            fileInput: document.getElementById('fileInput'),
            previewCanvas: document.getElementById('previewCanvas'),
            previewContainer: document.getElementById('previewContainer'),
            
            // Results Section
            resultsContainer: document.getElementById('resultsContainer'),
            totalStudents: document.getElementById('totalStudents'),
            averageScore: document.getElementById('averageScore'),
            highestScore: document.getElementById('highestScore'),
            lowestScore: document.getElementById('lowestScore'),
            
            // Current Result
            currentResult: document.getElementById('currentResult'),
            resultDetails: document.getElementById('resultDetails'),
            
            // Buttons
            setupTestBtn: document.getElementById('setupTestBtn'),
            scanBtn: document.getElementById('scanBtn'),
            resultsBtn: document.getElementById('resultsBtn'),
            
            // Camera
            cameraModal: document.getElementById('cameraModal'),
            cameraVideo: document.getElementById('cameraVideo'),
            cameraCanvas: document.getElementById('cameraCanvas'),
            
            // Loading
            loadingModal: document.getElementById('loadingModal')
        };

        // Application State
        const state = {
            currentUser: null,
            testConfig: {
                name: '',
                totalQuestions: 40,
                correctAnswers: [],
                answerSheetUrl: ''
            },
            currentScan: null,
            results: []
        };

        // Initialize Firebase (placeholder - you need to add Firebase SDK)
        function initializeFirebase() {
            console.log('Firebase would be initialized here');
            // In production, uncomment this:
            /*
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();
            */
        }

        // Event Listeners
        function setupEventListeners() {
            // Login/Register
            elements.loginBtn.addEventListener('click', handleLogin);
            elements.registerBtn.addEventListener('click', handleRegister);
            elements.logoutBtn.addEventListener('click', handleLogout);
            
            // Navigation
            elements.setupTestBtn.addEventListener('click', () => showSection('testSetup'));
            elements.scanBtn.addEventListener('click', () => showSection('scanSection'));
            elements.resultsBtn.addEventListener('click', () => {
                showSection('resultsSection');
                loadResults();
            });
            
            // Test Setup
            elements.totalQuestions.addEventListener('input', updateAnswerSheetCapacity);
            elements.saveTestBtn.addEventListener('click', saveTestConfig);
            
            // File Input
            elements.fileInput.addEventListener('change', handleFileUpload);
            
            // Scan Buttons
            document.querySelectorAll('.upload-area').forEach(area => {
                if (!area.onclick) {
                    area.addEventListener('click', function() {
                        if (this.querySelector('.fa-camera')) {
                            openCamera();
                        } else if (this.querySelector('.fa-scanner')) {
                            elements.fileInput.click();
                        } else if (this.querySelector('.fa-download')) {
                            generateAnswerSheet();
                        }
                    });
                }
            });
            
            // Drag and Drop
            document.addEventListener('dragover', handleDragOver);
            document.addEventListener('drop', handleDrop);
        }

        // Authentication Handlers
        function handleLogin() {
            const email = elements.email.value;
            const password = elements.password.value;
            
            if (!email || !password) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }
            
            // Simulate login (replace with Firebase auth)
            showAlert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            state.currentUser = { email, name: 'Ø§Ù„Ù…Ø¹Ù„Ù…' };
            showApp();
        }

        function handleRegister() {
            const email = elements.email.value;
            const password = elements.password.value;
            
            if (!email || !password) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }
            
            if (password.length < 6) {
                showAlert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                return;
            }
            
            showAlert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', 'success');
        }

        function handleLogout() {
            state.currentUser = null;
            showLogin();
            showAlert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬', 'success');
        }

        // Section Navigation
        function showSection(sectionId) {
            // Hide all sections
            elements.testSetup.classList.add('hidden');
            elements.scanSection.classList.add('hidden');
            elements.resultsSection.classList.add('hidden');
            elements.currentResult.classList.add('hidden');
            
            // Show selected section
            if (sectionId === 'testSetup') {
                elements.testSetup.classList.remove('hidden');
            } else if (sectionId === 'scanSection') {
                elements.scanSection.classList.remove('hidden');
                elements.currentResult.classList.add('hidden');
            } else if (sectionId === 'resultsSection') {
                elements.resultsSection.classList.remove('hidden');
            }
        }

        function showLogin() {
            elements.loginSection.classList.remove('hidden');
            elements.appSection.classList.add('hidden');
        }

        function showApp() {
            elements.loginSection.classList.add('hidden');
            elements.appSection.classList.remove('hidden');
            showSection('testSetup');
        }

        // Test Configuration
        function updateAnswerSheetCapacity() {
            const capacity = Math.min(80, parseInt(elements.totalQuestions.value) || 40);
            document.getElementById('sheetCapacity').textContent = capacity;
        }

        function saveTestConfig() {
            const testName = elements.testName.value;
            const totalQuestions = parseInt(elements.totalQuestions.value) || 40;
            const answers = elements.correctAnswers.value.split(',').map(a => a.trim());
            
            if (!testName) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±', 'error');
                return;
            }
            
            if (totalQuestions > 80) {
                showAlert('Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ùˆ 80', 'error');
                return;
            }
            
            if (answers.length !== totalQuestions) {
                showAlert(`Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª (${answers.length}) Ù„Ø§ ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (${totalQuestions})`, 'error');
                return;
            }
            
            state.testConfig = {
                name: testName,
                totalQuestions: totalQuestions,
                correctAnswers: answers,
                answerSheetUrl: `https://api.samiegrade.com/sheet?q=${totalQuestions}`
            };
            
            showAlert('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        }

        // Answer Sheet Generation
        function generateAnswerSheet() {
            const totalQuestions = parseInt(elements.totalQuestions.value) || 40;
            const questions = Math.min(totalQuestions, 80);
            
            // Create PDF with answer sheet template
            const answerSheetHTML = `
                <!DOCTYPE html>
                <html dir="rtl">
                <head>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
                        .sheet { max-width: 800px; margin: 0 auto; border: 2px solid #000; padding: 20px; }
                        .header { text-align: center; margin-bottom: 30px; }
                        .questions-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
                        .question-item { text-align: center; }
                        .question-number { font-weight: bold; margin-bottom: 5px; }
                        .options { display: flex; justify-content: center; gap: 15px; }
                        .option { width: 20px; height: 20px; border: 1px solid #000; border-radius: 50%; }
                        @media print { .no-print { display: none; } }
                    </style>
                </head>
                <body>
                    <div class="sheet">
                        <div class="header">
                            <h1>ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© - SamieGrade</h1>
                            <p>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: _________________ Ø§Ù„ØªØ§Ø±ÙŠØ®: __________</p>
                            <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: ${questions}</p>
                        </div>
                        <div class="questions-grid">
                            ${Array.from({length: questions}, (_, i) => `
                                <div class="question-item">
                                    <div class="question-number">${i + 1}</div>
                                    <div class="options">
                                        <div class="option" data-answer="A">A</div>
                                        <div class="option" data-answer="B">B</div>
                                        <div class="option" data-answer="C">C</div>
                                        <div class="option" data-answer="D">D</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <div style="margin-top: 30px; text-align: center; color: #666;">
                            <p>ØªØ¹Ù„ÙŠÙ…Ø§Øª: Ø¸Ù„Ù„ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ù‚Ù„Ù… Ø±ØµØ§Øµ</p>
                        </div>
                    </div>
                    <div class="no-print" style="text-align: center; margin-top: 20px;">
                        <button onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙˆØ±Ù‚Ø©</button>
                    </div>
                </body>
                </html>
            `;
            
            // Open in new window for printing
            const printWindow = window.open('', '_blank');
            printWindow.document.write(answerSheetHTML);
            printWindow.document.close();
        }

        // Camera Functions
        let stream = null;
        let flashOn = false;

        async function openCamera() {
            try {
                elements.cameraModal.classList.remove('hidden');
                stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: 'environment' },
                    audio: false
                });
                elements.cameraVideo.srcObject = stream;
            } catch (error) {
                showAlert('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ' + error.message, 'error');
                closeCamera();
            }
        }

        function closeCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            elements.cameraModal.classList.add('hidden');
        }

        function toggleFlash() {
            flashOn = !flashOn;
            // In a real app, you would control the torch here
            showAlert(flashOn ? 'ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙ„Ø§Ø´' : 'ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙÙ„Ø§Ø´', 'success');
        }

        function capturePhoto() {
            const video = elements.cameraVideo;
            const canvas = elements.cameraCanvas;
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            const imageData = canvas.toDataURL('image/jpeg');
            processCapturedImage(imageData);
            closeCamera();
        }

        // File Handling
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.type === 'application/pdf') {
                    showAlert('ÙŠØªÙ… Ø§Ù„Ø¢Ù† Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„Ù PDF...', 'success');
                    // PDF processing would go here
                } else if (file.type.startsWith('image/')) {
                    processImageFile(file);
                } else {
                    showAlert('Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…', 'error');
                }
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.stopPropagation();
            event.dataTransfer.dropEffect = 'copy';
        }

        function handleDrop(event) {
            event.preventDefault();
            event.stopPropagation();
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                handleFileUpload({ target: { files } });
            }
        }

        function processImageFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                processCapturedImage(e.target.result);
            };
            reader.readAsDataURL(file);
        }

        function processCapturedImage(imageData) {
            showLoading(true);
            
            // Display preview
            const img = new Image();
            img.onload = function() {
                const canvas = elements.previewCanvas;
                const ctx = canvas.getContext('2d');
                
                // Set canvas size
                canvas.width = Math.min(img.width, 800);
                canvas.height = (img.height / img.width) * canvas.width;
                
                // Draw image
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                // Show preview
                elements.previewContainer.classList.remove('hidden');
                
                // Process for OMR detection
                setTimeout(() => {
                    simulateOMRDetection();
                    showLoading(false);
                }, 1500);
            };
            img.src = imageData;
        }

        // OMR Processing
        function simulateOMRDetection() {
            if (!state.testConfig.correctAnswers || state.testConfig.correctAnswers.length === 0) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            const studentName = elements.studentName.value || 'Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            const totalQuestions = state.testConfig.totalQuestions;
            
            // Simulate reading answers (in real app, this would use image processing)
            const detectedAnswers = Array.from({length: totalQuestions}, () => {
                const options = ['A', 'B', 'C', 'D', ''];
                return options[Math.floor(Math.random() * options.length)];
            });
            
            // Grade the answers
            const correctAnswers = state.testConfig.correctAnswers;
            let score = 0;
            const results = [];
            
            for (let i = 0; i < totalQuestions; i++) {
                const isCorrect = detectedAnswers[i] === correctAnswers[i];
                if (isCorrect) score++;
                results.push({
                    question: i + 1,
                    studentAnswer: detectedAnswers[i] || 'Ù„Ù… ÙŠØ¬Ø¨',
                    correctAnswer: correctAnswers[i],
                    isCorrect: isCorrect
                });
            }
            
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Save result
            const result = {
                id: Date.now(),
                studentName: studentName,
                testName: state.testConfig.name,
                date: new Date().toLocaleDateString('ar-SA'),
                score: score,
                total: totalQuestions,
                percentage: percentage,
                answers: results,
                grade: getGradeLevel(percentage)
            };
            
            state.results.push(result);
            showResult(result);
        }

        function getGradeLevel(percentage) {
            if (percentage >= 90) return { text: 'Ù…Ù…ØªØ§Ø²', class: 'grade-excellent' };
            if (percentage >= 75) return { text: 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹', class: 'grade-good' };
            if (percentage >= 50) return { text: 'Ù…Ù‚Ø¨ÙˆÙ„', class: 'grade-average' };
            return { text: 'Ø¶Ø¹ÙŠÙ', class: 'grade-poor' };
        }

        function showResult(result) {
            const grade = getGradeLevel(result.percentage);
            
            elements.resultDetails.innerHTML = `
                <div class="stats">
                    <div class="stat-box">
                        <div class="number">${result.studentName}</div>
                        <div class="label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">${result.testName}</div>
                        <div class="label">Ø§Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">${result.score}/${result.total}</div>
                        <div class="label">Ø§Ù„Ø¯Ø±Ø¬Ø©</div>
                    </div>
                    <div class="stat-box">
                        <div class="number">${result.percentage}%</div>
                        <div class="label">Ø§Ù„Ù†Ø³Ø¨Ø©</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <span class="grade-badge ${grade.class}" style="font-size: 1.2rem; padding: 10px 30px;">
                        ${grade.text}
                    </span>
                </div>
                
                <h3 style="margin: 30px 0 15px; color: var(--primary);">
                    <i class="fas fa-list-check"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
                </h3>
                
                <div style="max-height: 300px; overflow-y: auto; background: #f8f9fa; border-radius: 10px; padding: 15px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px;">
                        ${result.answers.map((answer, index) => `
                            <div style="
                                background: ${answer.isCorrect ? '#d4edda' : '#f8d7da'};
                                border: 1px solid ${answer.isCorrect ? '#c3e6cb' : '#f5c6cb'};
                                border-radius: 8px;
                                padding: 8px;
                                text-align: center;
                                font-size: 0.9rem;
                            ">
                                <div style="font-weight: bold; color: var(--dark);">Ø³ ${answer.question}</div>
                                <div style="color: ${answer.isCorrect ? '#155724' : '#721c24'};">
                                    ${answer.studentAnswer} â†’ ${answer.correctAnswer}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button onclick="printSingleResult(${result.id})" class="btn btn-primary">
                        <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                    </button>
                    <button onclick="showSection('scanSection')" class="btn btn-success">
                        <i class="fas fa-plus"></i> ØªØµØ­ÙŠØ­ Ø¢Ø®Ø±
                    </button>
                </div>
            `;
            
            elements.currentResult.classList.remove('hidden');
            showAlert('ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            loadResults();
        }

        // Results Management
        function loadResults() {
            if (state.results.length === 0) {
                elements.resultsContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--gray);">
                        <i class="fas fa-inbox fa-3x" style="margin-bottom: 20px;"></i>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ø¹Ø±Ø¶Ù‡Ø§</p>
                    </div>
                `;
                return;
            }
            
            // Update stats
            elements.totalStudents.textContent = state.results.length;
            
            const percentages = state.results.map(r => r.percentage);
            const average = Math.round(percentages.reduce((a, b) => a + b, 0) / percentages.length);
            const highest = Math.max(...percentages);
            const lowest = Math.min(...percentages);
            
            elements.averageScore.textContent = `${average}%`;
            elements.highestScore.textContent = `${highest}%`;
            elements.lowestScore.textContent = `${lowest}%`;
            
            // Display results table
            elements.resultsContainer.innerHTML = `
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                            <th>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</th>
                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th>
                            <th>Ø§Ù„Ù†Ø³Ø¨Ø©</th>
                            <th>Ø§Ù„ØªÙ‚Ø¯ÙŠØ±</th>
                            <th>Ø®ÙŠØ§Ø±Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${state.results.map((result, index) => {
                            const grade = getGradeLevel(result.percentage);
                            return `
                                <tr>
                                    <td>${index + 1}</td>
                                    <td>${result.studentName}</td>
                                    <td>${result.testName}</td>
                                    <td>${result.date}</td>
                                    <td>${result.score}/${result.total}</td>
                                    <td>${result.percentage}%</td>
                                    <td>
                                        <span class="grade-badge ${grade.class}">
                                            ${grade.text}
                                        </span>
                                    </td>
                                    <td>
                                        <button onclick="viewResultDetails(${result.id})" class="btn btn-primary" style="padding: 5px 10px; font-size: 0.9rem;">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button onclick="deleteResult(${result.id})" class="btn btn-danger" style="padding: 5px 10px; font-size: 0.9rem;">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            `;
                        }).join('')}
                    </tbody>
                </table>
            `;
        }

        function viewResultDetails(resultId) {
            const result = state.results.find(r => r.id === resultId);
            if (result) {
                showResult(result);
            }
        }

        function deleteResult(resultId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù†ØªÙŠØ¬Ø©ØŸ')) {
                state.results = state.results.filter(r => r.id !== resultId);
                loadResults();
                showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù†ØªÙŠØ¬Ø©', 'success');
            }
        }

        // Export Functions
        function exportToExcel() {
            showAlert('Ø¬Ø§Ø±ÙŠ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Excel...', 'success');
            // In production, implement Excel export
        }

        function printResults() {
            window.print();
        }

        function printSingleResult(resultId) {
            const result = state.results.find(r => r.id === resultId);
            if (result) {
                const printContent = `
                    <!DOCTYPE html>
                    <html dir="rtl">
                    <head>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; }
                            .print-header { text-align: center; margin-bottom: 30px; }
                            .result-info { margin-bottom: 20px; }
                            table { width: 100%; border-collapse: collapse; }
                            th, td { border: 1px solid #000; padding: 8px; text-align: center; }
                            @media print { .no-print { display: none; } }
                        </style>
                    </head>
                    <body>
                        <div class="print-header">
                            <h1>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - SamieGrade</h1>
                            <hr>
                        </div>
                        <div class="result-info">
                            <p><strong>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</strong> ${result.studentName}</p>
                            <p><strong>Ø§Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</strong> ${result.testName}</p>
                            <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${result.date}</p>
                            <p><strong>Ø§Ù„Ø¯Ø±Ø¬Ø©:</strong> ${result.score}/${result.total} (${result.percentage}%)</p>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„</th>
                                    <th>Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${result.answers.map((answer, index) => `
                                    <tr>
                                        <td>${answer.question}</td>
                                        <td>${answer.studentAnswer}</td>
                                        <td>${answer.correctAnswer}</td>
                                        <td>${answer.isCorrect ? 'ØµØ­ÙŠØ­' : 'Ø®Ø·Ø£'}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                        <div class="no-print" style="margin-top: 20px; text-align: center;">
                            <button onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø©</button>
                            <button onclick="window.close()">Ø¥ØºÙ„Ø§Ù‚</button>
                        </div>
                    </body>
                    </html>
                `;
                
                const printWindow = window.open('', '_blank');
                printWindow.document.write(printContent);
                printWindow.document.close();
            }
        }

        // Utility Functions
        function showAlert(message, type = 'success') {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                ${message}
            `;
            
            document.querySelector('.container').insertBefore(alert, document.querySelector('.container').firstChild);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        function showLoading(show) {
            if (show) {
                elements.loadingModal.classList.remove('hidden');
            } else {
                elements.loadingModal.classList.add('hidden');
            }
        }

        // Initialize
        function init() {
            initializeFirebase();
            setupEventListeners();
            updateAnswerSheetCapacity();
            
            // Check if user is already logged in (demo purposes)
            if (localStorage.getItem('demoLoggedIn')) {
                state.currentUser = { email: 'demo@samiegrade.com', name: 'Ø§Ù„Ù…Ø¹Ù„Ù…' };
                showApp();
            }
            
            // Demo data
            state.testConfig = {
                name: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„',
                totalQuestions: 40,
                correctAnswers: Array.from({length: 40}, () => ['A', 'B', 'C', 'D'][Math.floor(Math.random() * 4)]),
                answerSheetUrl: ''
            };
            
            // Load demo results
            setTimeout(() => {
                if (state.results.length === 0) {
                    // Add some demo results
                    for (let i = 1; i <= 5; i++) {
                        state.results.push({
                            id: Date.now() + i,
                            studentName: `Ø·Ø§Ù„Ø¨ ${i}`,
                            testName: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„',
                            date: new Date().toLocaleDateString('ar-SA'),
                            score: Math.floor(Math.random() * 36) + 5,
                            total: 40,
                            percentage: Math.floor(Math.random() * 60) + 40,
                            answers: [],
                            grade: getGradeLevel(Math.floor(Math.random() * 60) + 40)
                        });
                    }
                }
            }, 1000);
        }

        // Start the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:
1. ÙˆØ§Ø¬Ù‡Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙˆØ´Ø§Ù…Ù„Ø©
ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ Ù…ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª

Ø£Ù„ÙˆØ§Ù† Ø¬Ø°Ø§Ø¨Ø© ÙˆØªØ¯Ø±Ø¬Ø§Øª Ù„ÙˆÙ†ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©

Ø£ÙŠÙ‚ÙˆØ§Ù†Ø§Øª Font Awesome Ù„Ø¬Ø¹Ù„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø£ÙƒØ«Ø± Ø¬Ø§Ø°Ø¨ÙŠØ©

2. Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ù…ØªÙ†ÙˆØ¹Ø©
ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆØ§Ù„ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ© Ù…Ø¹ ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ (ÙÙ„Ø§Ø´ØŒ ØªØ±ÙƒÙŠØ²)

Ø§Ù„Ù…Ø§Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ (Ø±ÙØ¹ ØµÙˆØ± Ù…Ù† Ø§Ù„Ù…Ø§Ø³Ø­)

Ø¯Ø¹Ù… Ù…Ù„ÙØ§Øª PDF ÙˆØ§Ù„ØµÙˆØ± (JPG, PNG)

3. Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø±Ù† Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
Ø¹Ø¯Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø­ØªÙ‰ 80 Ø³Ø¤Ø§Ù„

Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙŠØªØ³Ø¹ Ù„Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯

Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ© Ø¨Ø·Ø±Ù‚ Ù…ØªÙ†ÙˆØ¹Ø©

4. Ù†Ø¸Ø§Ù… ØªØµØ­ÙŠØ­ Ø°ÙƒÙŠ
Ù…Ø­Ø§ÙƒØ§Ø© Ù†Ø¸Ø§Ù… OMR Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª

Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

Ø¹Ø±Ø¶ ØªÙØµÙŠÙ„ÙŠ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© ÙˆØ§Ù„Ø®Ø§Ø·Ø¦Ø©

5. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
ØªØ®Ø²ÙŠÙ† ÙˆØ¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨

Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø© (Ø§Ù„Ù…ØªÙˆØ³Ø·ØŒ Ø§Ù„Ø£Ø¹Ù„Ù‰ØŒ Ø§Ù„Ø£Ø¯Ù†Ù‰)

ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ù„Ù‰ Excel

Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙØ±Ø¯ÙŠØ© ÙˆØ§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©

6. Ù…ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†

ØªØ­Ø¯ÙŠØ«Ø§Øª Ø­ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©

ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØªØ£ÙƒÙŠØ¯Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…

ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„

7. ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©
ØªØµÙ…ÙŠÙ… ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø­ØªØ±ÙØ©

Ø¯Ø¹Ù… 80 Ø³Ø¤Ø§Ù„ Ø¨Ø£Ø±Ø¨Ø¹Ø© Ø®ÙŠØ§Ø±Ø§Øª Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„

Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

8. ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†

ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª

ØªØ­Ù…ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©

Ù„Ø§Ø­Ø¸: ÙŠØ­ØªØ§Ø¬ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¥Ù„Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø§Øª Firebase Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙŠØ¹Ù…Ù„ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ.

Ù‡Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠÙ‚Ø±Ø£ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ±Ù‚Ù…Ù‡ 
Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: Ù†Ø¹Ù…ØŒ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø¨Ø§Ù„ÙØ¹Ù„!
Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:
âœ… ÙŠÙ‚Ø±Ø£ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
ÙŠÙˆØ¬Ø¯ Ø­Ù‚Ù„ Ù…Ø®ØµØµ Ù„Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ù…Ø³Ø­:

html
<input type="text" id="studentName" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">
ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø§Ø³Ù… Ù…Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ¹Ø±Ø¶Ù‡ ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±

âœ… ÙŠÙ‚Ø±Ø£ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØªÙŠ ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:

html
<p>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: _________________ Ø§Ù„ØªØ§Ø±ÙŠØ®: __________</p>
<p>Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³: __________</p>
Ù„ÙƒÙ† Ø³Ø£Ø­Ø³Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø£ÙƒØ«Ø± Ù„Ø¥Ø¶Ø§ÙØ©:
Ù‚Ø±Ø§Ø¡Ø© Ø±Ù‚Ù…ÙŠØ© Ù„Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©

Ù…Ø³Ø­ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø£Ùˆ QR ÙƒÙˆØ¯ Ù„Ù„Ø·Ø§Ù„Ø¨

ØªØ­Ø³ÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©

Ø¥Ù„ÙŠÙƒ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø©:
html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamieGrade - Ù†Ø¸Ø§Ù… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ø£Ø¶Ù Ù…ÙƒØªØ¨Ø© jsQR Ù„Ù‚Ø±Ø§Ø¡Ø© QR codes -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    
    <style>
        /* ÙƒÙ„ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ */
        /* Ø£Ø¶ÙŠÙ ÙÙ‚Ø· Ø£Ù†Ù…Ø§Ø· Ø¬Ø¯ÙŠØ¯Ø© */
        
        .student-id-inputs {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .student-id-input {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            height: 60px;
        }
        
        .barcode-section {
            background: #f8f9fa;
            border: 2px dashed #3498db;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
        }
        
        .barcode-section:hover {
            background: #e3f2fd;
        }
        
        .qr-scanner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 9999;
        }
        
        .qr-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .qr-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            border: 3px solid #27ae60;
            background: rgba(0,0,0,0.3);
        }
        
        .student-info-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #3498db;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .info-label {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .info-value {
            color: #3498db;
            font-weight: 600;
        }
        
        .answer-sheet-template {
            background: white;
            border: 2px solid #2c3e50;
            padding: 30px;
            margin: 20px 0;
            border-radius: 10px;
        }
        
        .sheet-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 20px;
        }
        
        .student-fields {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .field {
            text-align: center;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .field-label {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .field-space {
            height: 30px;
            border-bottom: 2px dashed #666;
            margin-top: 5px;
        }
        
        .id-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin: 20px 0;
            text-align: center;
        }
        
        .id-cell {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .id-cell.active {
            background: #2c3e50;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙƒÙ…Ø§ Ù‡Ùˆ -->
    <div class="container">
        <!-- ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙƒÙˆØ¯ ÙƒÙ…Ø§ Ù‡Ùˆ ... -->
        
        <!-- ØªØ­Ø³ÙŠÙ† Ù‚Ø³Ù… Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª -->
        <div id="scanSection" class="card hidden">
            <h2><i class="fas fa-camera"></i> Ù…Ø³Ø­ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
            
            <!-- Ø¨Ø·Ø§Ù‚Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ -->
            <div class="student-info-card" id="studentInfoCard">
                <h3 style="color: #2c3e50; margin-bottom: 20px;">
                    <i class="fas fa-user-graduate"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
                </h3>
                
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label>
                    <input type="text" id="studentName" class="form-control" 
                           placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ Ø§Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯"
                           onchange="updateStudentInfo()">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-id-card"></i> Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ / Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³</label>
                    <div class="student-id-inputs">
                        <input type="number" class="form-control student-id-input" max="9" min="0"
                               oninput="moveToNext(this, 1)" data-index="0">
                        <input type="number" class="form-control student-id-input" max="9" min="0"
                               oninput="moveToNext(this, 2)" data-index="1">
                        <input type="number" class="form-control student-id-input" max="9" min="0"
                               oninput="moveToNext(this, 3)" data-index="2">
                        <input type="number" class="form-control student-id-input" max="9" min="0"
                               oninput="moveToNext(this, 4)" data-index="3">
                        <input type="number" class="form-control student-id-input" max="9" min="0"
                               oninput="moveToNext(this, 5)" data-index="4">
                    </div>
                </div>
                
                <!-- Ø£Ø²Ø±Ø§Ø± Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙˆØ§Ù„QR -->
                <div class="row" style="margin-top: 20px;">
                    <button onclick="scanBarcode()" class="btn btn-warning">
                        <i class="fas fa-barcode"></i> Ù…Ø³Ø­ Ø¨Ø§Ø±ÙƒÙˆØ¯
                    </button>
                    <button onclick="scanQRCode()" class="btn btn-success">
                        <i class="fas fa-qrcode"></i> Ù…Ø³Ø­ QR ÙƒÙˆØ¯
                    </button>
                </div>
                
                <!-- Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ -->
                <div id="studentDisplay" class="hidden" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <div class="info-row">
                        <span class="info-label">Ø§Ù„Ø§Ø³Ù…:</span>
                        <span class="info-value" id="displayName">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</span>
                        <span class="info-value" id="displayId">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Ø§Ù„ØµÙ:</span>
                        <span class="info-value" id="displayClass">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Ø¨Ø§Ù‚ÙŠ Ù‚Ø³Ù… Ø§Ù„Ù…Ø³Ø­ ÙƒÙ…Ø§ Ù‡Ùˆ -->
            <!-- ... -->
        </div>
        
        <!-- ØªØ­Ø³ÙŠÙ† Ù‚Ø³Ù… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
        <div id="testSetup" class="card">
            <!-- ... -->
            
            <!-- Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø­Ø³Ù† -->
            <div class="form-group">
                <label><i class="fas fa-print"></i> Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø­Ø³Ù†</label>
                <div class="answer-sheet-template">
                    <div class="sheet-header">
                        <h3 style="color: #2c3e50;">ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© - SamieGrade</h3>
                        <p style="color: #666;">Ù…ØµÙ…Ù…Ø© Ù„Ù‚Ø±Ø§Ø¡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</p>
                    </div>
                    
                    <div class="student-fields">
                        <div class="field">
                            <div class="field-label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</div>
                            <div class="field-space"></div>
                        </div>
                        <div class="field">
                            <div class="field-label">Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³</div>
                            <div class="field-space"></div>
                        </div>
                        <div class="field">
                            <div class="field-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</div>
                            <div class="field-space"></div>
                        </div>
                    </div>
                    
                    <!-- Ø´Ø¨ÙƒØ© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø±Ù‚Ù… -->
                    <div style="text-align: center; margin: 20px 0;">
                        <p style="font-weight: bold; color: #2c3e50;">Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø¸Ù„Ù„ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©)</p>
                        <div class="id-grid">
                            <div class="id-cell">0</div>
                            <div class="id-cell">1</div>
                            <div class="id-cell">2</div>
                            <div class="id-cell">3</div>
                            <div class="id-cell">4</div>
                            <div class="id-cell">5</div>
                            <div class="id-cell">6</div>
                            <div class="id-cell">7</div>
                            <div class="id-cell">8</div>
                            <div class="id-cell">9</div>
                        </div>
                        <p style="color: #666; font-size: 0.9rem;">Ø¸Ù„Ù„ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ù„ÙƒÙ„ Ø±Ù‚Ù… ÙÙŠ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</p>
                    </div>
                    
                    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ -->
                    <div style="text-align: center; margin: 30px 0; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <i class="fas fa-barcode fa-3x" style="color: #2c3e50;"></i>
                        <p style="margin-top: 10px; color: #666;">Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙØ±ÙŠØ¯ Ù„ÙƒÙ„ Ø·Ø§Ù„Ø¨</p>
                    </div>
                </div>
                
                <button onclick="generateEnhancedAnswerSheet()" class="btn btn-success" style="margin-top: 20px;">
                    <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø­Ø³Ù†
                </button>
            </div>
        </div>
    </div>

    <!-- Ù…Ø§Ø³Ø­ QR Code -->
    <div id="qrScanner" class="qr-scanner hidden">
        <div class="close-modal" onclick="closeQRScanner()" style="z-index: 10000;">
            <i class="fas fa-times"></i>
        </div>
        <video id="qrVideo" class="qr-video"></video>
        <div class="qr-overlay"></div>
        <div class="camera-controls">
            <button onclick="captureQRCode()" class="btn btn-success" style="width: 70px; height: 70px; border-radius: 50%;">
                <i class="fas fa-camera fa-2x"></i>
            </button>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø·Ù„Ø§Ø¨
        const demoStudents = {
            "10001": { name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯", class: "Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø± - Ø£", id: "10001" },
            "10002": { name: "Ø³Ø§Ø±Ø© Ø®Ø§Ù„Ø¯", class: "Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø± - Ø¨", id: "10002" },
            "10003": { name: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ", class: "Ø§Ù„ØµÙ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø± - Ø£", id: "10003" },
            "10004": { name: "ÙØ§Ø·Ù…Ø© Ø­Ø³Ù†", class: "Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹ - Ø¬", id: "10004" },
            "10005": { name: "Ø®Ø§Ù„Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", class: "Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø± - Ø£", id: "10005" }
        };

        // ÙˆØ¸Ø§Ø¦Ù Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
        function updateStudentInfo() {
            const name = document.getElementById('studentName').value;
            const idInputs = document.querySelectorAll('.student-id-input');
            let studentId = '';
            
            idInputs.forEach(input => {
                if (input.value) studentId += input.value;
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            document.getElementById('displayName').textContent = name || '-';
            document.getElementById('displayId').textContent = studentId || '-';
            
            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            if (demoStudents[studentId]) {
                const student = demoStudents[studentId];
                document.getElementById('studentName').value = student.name;
                document.getElementById('displayName').textContent = student.name;
                document.getElementById('displayClass').textContent = student.class;
            } else {
                document.getElementById('displayClass').textContent = '-';
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
            document.getElementById('studentDisplay').classList.remove('hidden');
        }

        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø±Ù‚Ù…
        function moveToNext(input, nextIndex) {
            if (input.value.length === 1 && nextIndex <= 5) {
                const nextInput = document.querySelector(`.student-id-input[data-index="${nextIndex-1}"]`);
                if (nextInput) nextInput.focus();
            }
            updateStudentInfo();
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        function scanBarcode() {
            showAlert('Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ù…Ø§Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯...', 'success');
            // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
            simulateBarcodeScan();
        }

        // Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        function simulateBarcodeScan() {
            const randomId = Object.keys(demoStudents)[
                Math.floor(Math.random() * Object.keys(demoStudents).length)
            ];
            const student = demoStudents[randomId];
            
            // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            document.getElementById('studentName').value = student.name;
            
            // ØªØ¹Ø¨Ø¦Ø© Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
            const idDigits = student.id.split('');
            const idInputs = document.querySelectorAll('.student-id-input');
            idInputs.forEach((input, index) => {
                if (idDigits[index]) {
                    input.value = idDigits[index];
                }
            });
            
            updateStudentInfo();
            showAlert(`ØªÙ… Ù…Ø³Ø­ Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨: ${student.name}`, 'success');
        }

        // Ù…Ø³Ø­ QR Code
        let qrStream = null;
        
        function scanQRCode() {
            document.getElementById('qrScanner').classList.remove('hidden');
            
            navigator.mediaDevices.getUserMedia({ 
                video: { facingMode: 'environment' } 
            }).then(stream => {
                qrStream = stream;
                const video = document.getElementById('qrVideo');
                video.srcObject = stream;
                video.play();
                
                // Ø¨Ø¯Ø¡ Ù…Ø³Ø­ QR Code
                scanQRCodeFromVideo();
            }).catch(error => {
                showAlert('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ' + error.message, 'error');
                closeQRScanner();
            });
        }

        function closeQRScanner() {
            if (qrStream) {
                qrStream.getTracks().forEach(track => track.stop());
                qrStream = null;
            }
            document.getElementById('qrScanner').classList.add('hidden');
        }

        function captureQRCode() {
            const video = document.getElementById('qrVideo');
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… jsQR Ù„Ù‚Ø±Ø§Ø¡Ø© QR Code
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const code = jsQR(imageData.data, imageData.width, imageData.height);
            
            if (code) {
                processQRCodeData(code.data);
                closeQRScanner();
            } else {
                showAlert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ QR Code ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©', 'error');
            }
        }

        function scanQRCodeFromVideo() {
            const video = document.getElementById('qrVideo');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            function tick() {
                if (video.readyState === video.HAVE_ENOUGH_DATA) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const code = jsQR(imageData.data, imageData.width, imageData.height);
                    
                    if (code) {
                        processQRCodeData(code.data);
                        closeQRScanner();
                        return;
                    }
                }
                requestAnimationFrame(tick);
            }
            requestAnimationFrame(tick);
        }

        function processQRCodeData(data) {
            try {
                const studentData = JSON.parse(data);
                if (studentData.id && studentData.name) {
                    document.getElementById('studentName').value = studentData.name;
                    
                    // ØªØ¹Ø¨Ø¦Ø© Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
                    const idDigits = studentData.id.toString().split('');
                    const idInputs = document.querySelectorAll('.student-id-input');
                    idInputs.forEach((input, index) => {
                        input.value = idDigits[index] || '';
                    });
                    
                    updateStudentInfo();
                    showAlert(`ØªÙ… Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨: ${studentData.name}`, 'success');
                }
            } catch (e) {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† JSONØŒ Ù…Ø¹Ø§Ù„Ø¬Ø© ÙƒÙ†Øµ Ø¹Ø§Ø¯ÙŠ
                if (demoStudents[data]) {
                    const student = demoStudents[data];
                    document.getElementById('studentName').value = student.name;
                    
                    const idDigits = student.id.split('');
                    const idInputs = document.querySelectorAll('.student-id-input');
                    idInputs.forEach((input, index) => {
                        input.value = idDigits[index] || '';
                    });
                    
                    updateStudentInfo();
                    showAlert(`ØªÙ… Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨: ${student.name}`, 'success');
                } else {
                    showAlert('Ø¨ÙŠØ§Ù†Ø§Øª QR Code ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©', 'error');
                }
            }
        }

        // ØªØ­Ø³ÙŠÙ† ÙˆØ¸ÙŠÙØ© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
        function enhancedOMRDetection() {
            // Ù‚Ø±Ø§Ø¡Ø© Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© (Ù…Ø­Ø§ÙƒØ§Ø©)
            const studentName = document.getElementById('studentName').value;
            
            // Ù‚Ø±Ø§Ø¡Ø© Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ© ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©
            const studentId = readStudentIdFromImage();
            
            // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            const answers = readAnswersFromImage();
            
            return {
                studentName: studentName,
                studentId: studentId,
                answers: answers
            };
        }

        function readStudentIdFromImage() {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø±Ù‚Ù… Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ©
            // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ù…Ø¸Ù„Ù„Ø©
            const idInputs = document.querySelectorAll('.student-id-input');
            let id = '';
            idInputs.forEach(input => {
                if (input.value) id += input.value;
            });
            return id || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø­Ø³Ù†Ø©
        function generateEnhancedAnswerSheet() {
            const totalQuestions = parseInt(document.getElementById('totalQuestions').value) || 40;
            const questions = Math.min(totalQuestions, 80);
            
            const sheetHTML = `
                <!DOCTYPE html>
                <html dir="rtl">
                <head>
                    <style>
                        body { 
                            font-family: 'Arial', sans-serif; 
                            margin: 0; 
                            padding: 30px; 
                            background: #fff;
                        }
                        .sheet-container {
                            max-width: 1000px;
                            margin: 0 auto;
                            border: 3px solid #2c3e50;
                            padding: 40px;
                            background: white;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 40px;
                            border-bottom: 3px solid #2c3e50;
                            padding-bottom: 20px;
                        }
                        .header h1 {
                            color: #2c3e50;
                            margin: 0;
                            font-size: 32px;
                        }
                        .header h2 {
                            color: #3498db;
                            margin: 10px 0;
                            font-size: 24px;
                        }
                        .student-info {
                            display: grid;
                            grid-template-columns: repeat(3, 1fr);
                            gap: 30px;
                            margin: 40px 0;
                            padding: 20px;
                            background: #f8f9fa;
                            border-radius: 10px;
                            border: 2px dashed #3498db;
                        }
                        .info-field {
                            text-align: center;
                        }
                        .field-label {
                            font-weight: bold;
                            color: #2c3e50;
                            margin-bottom: 10px;
                            font-size: 18px;
                        }
                        .field-line {
                            height: 40px;
                            border-bottom: 3px solid #666;
                            margin-top: 10px;
                        }
                        .id-section {
                            text-align: center;
                            margin: 40px 0;
                            padding: 20px;
                            background: #ecf0f1;
                            border-radius: 10px;
                        }
                        .id-instruction {
                            font-weight: bold;
                            color: #2c3e50;
                            margin-bottom: 20px;
                            font-size: 20px;
                        }
                        .id-grid {
                            display: grid;
                            grid-template-columns: repeat(10, 1fr);
                            gap: 15px;
                            margin: 30px auto;
                            max-width: 800px;
                        }
                        .id-cell {
                            width: 50px;
                            height: 50px;
                            border: 2px solid #2c3e50;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 20px;
                            font-weight: bold;
                            margin: 0 auto;
                            cursor: pointer;
                            background: white;
                        }
                        .id-cell:hover {
                            background: #f0f0f0;
                        }
                        .id-cell.active {
                            background: #2c3e50;
                            color: white;
                        }
                        .questions-section {
                            margin: 50px 0;
                        }
                        .section-title {
                            text-align: center;
                            color: #2c3e50;
                            font-size: 24px;
                            margin-bottom: 30px;
                            padding-bottom: 10px;
                            border-bottom: 2px solid #3498db;
                        }
                        .questions-grid {
                            display: grid;
                            grid-template-columns: repeat(4, 1fr);
                            gap: 25px;
                        }
                        .question-item {
                            text-align: center;
                            padding: 15px;
                            border: 2px solid #ddd;
                            border-radius: 10px;
                            background: #f8f9fa;
                        }
                        .question-number {
                            font-weight: bold;
                            font-size: 20px;
                            color: #2c3e50;
                            margin-bottom: 15px;
                        }
                        .options {
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 10px;
                        }
                        .option {
                            width: 35px;
                            height: 35px;
                            border: 2px solid #666;
                            border-radius: 50%;
                            margin: 0 auto;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 14px;
                            cursor: pointer;
                            background: white;
                        }
                        .option:hover {
                            background: #f0f0f0;
                        }
                        .option.active {
                            background: #2c3e50;
                            color: white;
                        }
                        .barcode-section {
                            text-align: center;
                            margin: 40px 0;
                            padding: 30px;
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            border-radius: 15px;
                            color: white;
                        }
                        .instructions {
                            margin: 30px 0;
                            padding: 20px;
                            background: #fff8e1;
                            border-radius: 10px;
                            border-right: 5px solid #f39c12;
                        }
                        .instructions h3 {
                            color: #f39c12;
                            margin-top: 0;
                        }
                        .instructions ul {
                            margin: 10px 0;
                            padding-right: 20px;
                        }
                        .instructions li {
                            margin-bottom: 10px;
                            line-height: 1.6;
                        }
                        .footer {
                            text-align: center;
                            margin-top: 50px;
                            padding-top: 20px;
                            border-top: 2px solid #ddd;
                            color: #666;
                            font-size: 14px;
                        }
                        @media print {
                            .no-print { display: none; }
                            body { padding: 0; }
                            .sheet-container { 
                                border: none; 
                                padding: 20px;
                                max-width: 100%;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="sheet-container">
                        <div class="header">
                            <h1>Ù†Ø¸Ø§Ù… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø°ÙƒÙŠ</h1>
                            <h2>SamieGrade</h2>
                            <p style="color: #666; font-size: 18px;">ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© Ù…ØµÙ…Ù…Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</p>
                        </div>
                        
                        <div class="student-info">
                            <div class="info-field">
                                <div class="field-label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</div>
                                <div class="field-line"></div>
                                <div style="color: #666; font-size: 14px; margin-top: 5px;">(Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ø®Ø· Ø§Ù„ÙˆØ§Ø¶Ø­)</div>
                            </div>
                            <div class="info-field">
                                <div class="field-label">Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³</div>
                                <div class="field-line"></div>
                                <div style="color: #666; font-size: 14px; margin-top: 5px;">(Ø±Ù‚Ù… Ù…Ù‚Ø¹Ø¯ Ø§Ù„Ø·Ø§Ù„Ø¨)</div>
                            </div>
                            <div class="info-field">
                                <div class="field-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</div>
                                <div class="field-line"></div>
                                <div style="color: #666; font-size: 14px; margin-top: 5px;">(Ù‡Ù€ / / )</div>
                            </div>
                        </div>
                        
                        <div class="id-section">
                            <div class="id-instruction">Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø¸Ù„Ù„ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ù„ÙƒÙ„ Ø±Ù‚Ù…)</div>
                            <div class="id-grid">
                                ${Array.from({length: 10}, (_, i) => `
                                    <div class="id-cell" onclick="toggleCell(this)">
                                        ${i}
                                    </div>
                                `).join('')}
                            </div>
                            <p style="color: #666; margin-top: 20px;">
                                Ù…Ø«Ø§Ù„: Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ù‚Ù…Ùƒ 12345ØŒ Ø¸Ù„Ù„ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø£Ø±Ù‚Ø§Ù… 1ØŒ 2ØŒ 3ØŒ 4ØŒ 5
                            </p>
                        </div>
                        
                        <div class="barcode-section">
                            <i class="fas fa-barcode fa-4x" style="margin-bottom: 20px;"></i>
                            <h3 style="margin: 0; color: white;">Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„ÙØ±ÙŠØ¯ Ù„Ù„Ø·Ø§Ù„Ø¨</h3>
                            <p style="margin-top: 10px; opacity: 0.9;">
                                (Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙØ±ÙŠØ¯ Ù„ÙƒÙ„ Ø·Ø§Ù„Ø¨ Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„)
                            </p>
                        </div>
                        
                        <div class="instructions">
                            <h3><i class="fas fa-info-circle"></i> ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù‡Ø§Ù…Ø©:</h3>
                            <ul>
                                <li>Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙˆØ±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³ Ø¨Ø®Ø· ÙˆØ§Ø¶Ø­</li>
                                <li>Ø¸Ù„Ù„ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„Ø© Ù„Ø±Ù‚Ù…Ùƒ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© Ø£Ø¹Ù„Ø§Ù‡</li>
                                <li>Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ÙˆØ§Ø­Ø¯ØŒ Ø¸Ù„Ù„ Ø¯Ø§Ø¦Ø±Ø© Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</li>
                                <li>Ø§Ø³ØªØ®Ø¯Ù… Ù‚Ù„Ù… Ø±ØµØ§Øµ (HB-2) Ù„Ù„ØªØ¸Ù„ÙŠÙ„</li>
                                <li>ØªØ£ÙƒØ¯ Ù…Ù† ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</li>
                                <li>Ù„Ø§ ØªØ·ÙˆÙŠ Ø§Ù„ÙˆØ±Ù‚Ø© Ø£Ùˆ ØªØ³Ø¨Ø¨ ØªØ¬Ø¹Ø¯Ø§Øª</li>
                            </ul>
                        </div>
                        
                        <div class="questions-section">
                            <div class="section-title">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (${questions} Ø³Ø¤Ø§Ù„)</div>
                            <div class="questions-grid">
                                ${Array.from({length: questions}, (_, i) => `
                                    <div class="question-item">
                                        <div class="question-number">Ø³Ø¤Ø§Ù„ ${i + 1}</div>
                                        <div class="options">
                                            <div class="option" onclick="selectOption(this, 'A')">A</div>
                                            <div class="option" onclick="selectOption(this, 'B')">B</div>
                                            <div class="option" onclick="selectOption(this, 'C')">C</div>
                                            <div class="option" onclick="selectOption(this, 'D')">D</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="footer">
                            <p>Â© 2024 SamieGrade - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
                            <p>Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ±Ù‚Ø© Ù…ØµÙ…Ù…Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
                        </div>
                        
                        <div class="no-print" style="text-align: center; margin-top: 40px;">
                            <button onclick="window.print()" style="
                                background: #27ae60;
                                color: white;
                                border: none;
                                padding: 15px 40px;
                                font-size: 18px;
                                border-radius: 8px;
                                cursor: pointer;
                                margin: 10px;
                            ">
                                <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙˆØ±Ù‚Ø©
                            </button>
                            <button onclick="generatePDF()" style="
                                background: #3498db;
                                color: white;
                                border: none;
                                padding: 15px 40px;
                                font-size: 18px;
                                border-radius: 8px;
                                cursor: pointer;
                                margin: 10px;
                            ">
                                <i class="fas fa-download"></i> ØªØ­Ù…ÙŠÙ„ PDF
                            </button>
                        </div>
                    </div>
                    
                    <script>
                        function toggleCell(cell) {
                            cell.classList.toggle('active');
                        }
                        
                        function selectOption(option, answer) {
                            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø³Ø¤Ø§Ù„
                            const questionItem = option.closest('.question-item');
                            questionItem.querySelectorAll('.option').forEach(opt => {
                                opt.classList.remove('active');
                            });
                            
                            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±
                            option.classList.add('active');
                        }
                        
                        function generatePDF() {
                            alert('Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù PDF...');
                            // Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ PDF Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙƒØªØ¨Ø© Ù…Ø«Ù„ jsPDF
                        }
                        
                        window.addEventListener('DOMContentLoaded', (event) => {
                            // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø·Ø§Ù„Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ø¹Ø±Ø¶
                            const randomId = Math.floor(10000 + Math.random() * 90000);
                            document.querySelector('.id-instruction').innerHTML += 
                                '<br><small style=\"color: #2c3e50;\">Ø±Ù‚Ù… Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ: ' + randomId + '</small>';
                        });
                    <\/script>
                </body>
                </html>
            `;
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(sheetHTML);
            printWindow.document.close();
            
            showAlert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        }

        // Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© Ù‚Ø±Ø§Ø¡Ø© Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©
        function extractStudentInfoFromImage(imageData) {
            // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… OCR Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ
            // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©
            return {
                name: document.getElementById('studentName').value || 'Ø·Ø§Ù„Ø¨',
                id: readStudentIdFromImage(),
                class: detectClassFromImage() // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©
            };
        }

        function detectClassFromImage() {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„ØµÙ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©
            const classes = ['Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±', 'Ø§Ù„ØµÙ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±', 'Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±'];
            return classes[Math.floor(Math.random() * classes.length)];
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ¸ÙŠÙØ© processCapturedImage
        function processCapturedImage(imageData) {
            showLoading(true);
            
            const img = new Image();
            img.onload = function() {
                const canvas = document.getElementById('previewCanvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = Math.min(img.width, 800);
                canvas.height = (img.height / img.width) * canvas.width;
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                // Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©
                const studentInfo = extractStudentInfoFromImage();
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù‚ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                if (studentInfo.name && studentInfo.name !== 'Ø·Ø§Ù„Ø¨') {
                    document.getElementById('studentName').value = studentInfo.name;
                }
                
                if (studentInfo.id && studentInfo.id !== 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ') {
                    const idDigits = studentInfo.id.toString().split('');
                    const idInputs = document.querySelectorAll('.student-id-input');
                    idInputs.forEach((input, index) => {
                        if (idDigits[index]) {
                            input.value = idDigits[index];
                        }
                    });
                }
                
                updateStudentInfo();
                elements.previewContainer.classList.remove('hidden');
                
                setTimeout(() => {
                    simulateOMRDetection();
                    showLoading(false);
                }, 1500);
            };
            img.src = imageData;
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        document.addEventListener('DOMContentLoaded', function() {
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('studentName').addEventListener('input', updateStudentInfo);
            
            const idInputs = document.querySelectorAll('.student-id-input');
            idInputs.forEach(input => {
                input.addEventListener('input', updateStudentInfo);
            });
            
            // ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        });
    </script>
</body>
</html>
Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:
âœ… 1. Ù‚Ø±Ø§Ø¡Ø© Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨
ÙŠØ¯Ø®Ù„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø§Ø³Ù… ÙŠØ¯ÙˆÙŠØ§Ù‹

Ø£Ùˆ ÙŠÙ‚Ø±Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯/QR ÙƒÙˆØ¯

Ø£Ùˆ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© OCR Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹ Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø§Ø³Ù… Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©

âœ… 2. Ù‚Ø±Ø§Ø¡Ø© Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø¹Ø¯Ø© Ø·Ø±Ù‚:
Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù…ÙŠ ÙŠØ¯ÙˆÙŠ (5 Ø®Ø§Ù†Ø§Øª)

Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† Ø´Ø¨ÙƒØ© Ù…Ø¸Ù„Ù„Ø© ÙÙŠ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©

Ù…Ø³Ø­ Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨

Ù…Ø³Ø­ QR ÙƒÙˆØ¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ§Ù…Ù„Ø©

âœ… 3. Ù†Ù…ÙˆØ°Ø¬ ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø­Ø³Ù‘Ù† ÙŠØªØ¶Ù…Ù†:
Ù…ÙƒØ§Ù† Ù…Ø®ØµØµ Ù„Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨

Ø´Ø¨ÙƒØ© Ù‚Ø±Ø§Ø¡Ø© Ø±Ù‚Ù…ÙŠØ© (0-9) Ù„ØªØ¸Ù„ÙŠÙ„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨

Ù…Ù†Ø·Ù‚Ø© Ù„Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„ÙØ±ÙŠØ¯

ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¢Ù„ÙŠØ©

âœ… 4. Ù…ÙŠØ²Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©:
Ù…Ø§Ø³Ø­ QR Code Ù…Ø¯Ù…Ø¬ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

Ù‚Ø±Ø§Ø¡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨

Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø´ÙƒÙ„ Ù…Ù†Ø¸Ù…

ÙˆØ±Ù‚Ø© Ø¥Ø¬Ø§Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©

ÙƒÙŠÙ ÙŠØ¹Ù…Ù„:
Ø§Ù„Ù…Ø¹Ù„Ù… ÙŠÙ…Ø³Ø­ ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆØ§Ù„

Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙ‚Ø±Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:

Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ø¸Ù„Ù„Ø©

Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ù† Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ù…Ø¸Ù„Ù„Ø©

Ø£Ùˆ ÙŠÙ…ÙƒÙ† Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯/QR ÙƒÙˆØ¯ Ø§Ù„Ù…Ø±ÙÙ‚ Ø¨ÙˆØ±Ù‚Ø© Ø§Ù„Ø·Ø§Ù„Ø¨

ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

ÙŠØªÙ… Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ¹Ø±Ø¶Ù‡Ø§ Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙØ§ØµÙŠÙ„

ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:
Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ù…Ø¸Ù„Ù„Ø©

jsQR Ù„Ù‚Ø±Ø§Ø¡Ø© QR Codes

Ø´Ø¨ÙƒØ§Øª Ù‚Ø±Ø§Ø¡Ø© Ø±Ù‚Ù…ÙŠØ© Ù„ØªØ­Ø¯ÙŠØ¯ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨

Ù…Ø§Ø³Ø­ ÙƒØ§Ù…ÙŠØ±Ø§ Ù…ØªÙƒØ§Ù…Ù„ Ø¨Ø¯Ø¹Ù… Ø§Ù„ÙÙ„Ø§Ø´ ÙˆØ§Ù„ØªØ±ÙƒÙŠØ²

Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¢Ù† ÙŠÙ‚Ø±Ø£ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ÙˆØ±Ù‚Ù…Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† ÙˆØ±Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø£Ùˆ Ù…Ù† Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯/QR ÙƒÙˆØ¯! ğŸ¯

Ù…Ù…ØªØ§Ø²
ÙˆÙ„ÙƒÙ† Ø¥Ø°Ø§ ÙƒØª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ø³Ù…Ù‡ ÙˆØ±Ù‚Ù…Ù‡ Ø¨Ø®Ø· ÙŠØ¯Ù‡ Ø¹Ù„Ù‰ Ù‡Ù„ ÙŠÙ…ÙƒÙ† Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù† ÙŠÙ‚Ø±Ø£Ù‡Ø§ 
Ù†Ø¹Ù…ØŒ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ØªÙ‚Ù†ÙŠØ© OCR Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙƒØªÙˆØ¨ Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯! âœï¸
Ø³Ø£Ø¶ÙŠÙ Ù…ÙŠØ²Ø© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙƒØªÙˆØ¨ Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Tesseract.js - Ù…ÙƒØªØ¨Ø© OCR Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ù…ØµØ¯Ø±.

Ø¥Ù„ÙŠÙƒ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø© Ù…Ø¹ OCR:
html
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamieGrade - Ù†Ø¸Ø§Ù… ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ù…ÙƒØªØ¨Ø© Tesseract.js Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@v4.0.2/dist/tesseract.min.js"></script>
    <!-- Ù…ÙƒØªØ¨Ø© jsQR -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    
    <style>
        /* Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ */
        /* Ø£Ø¶ÙŠÙ Ø£Ù†Ù…Ø§Ø· Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„OCR */
        
        .ocr-zone {
            position: relative;
            border: 3px dashed #9b59b6;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            background: rgba(155, 89, 182, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .ocr-zone:hover {
            background: rgba(155, 89, 182, 0.1);
            border-color: #8e44ad;
        }
        
        .ocr-zone.active {
            border-color: #27ae60;
            background: rgba(39, 174, 96, 0.1);
        }
        
        .ocr-results {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #3498db;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .ocr-result-item {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-right: 4px solid #3498db;
        }
        
        .ocr-confidence {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .confidence-high {
            background: rgba(39, 174, 96, 0.2);
            color: #27ae60;
        }
        
        .confidence-medium {
            background: rgba(243, 156, 18, 0.2);
            color: #f39c12;
        }
        
        .confidence-low {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }
        
        .handwriting-canvas {
            max-width: 100%;
            border: 2px solid #2c3e50;
            border-radius: 10px;
            margin: 15px 0;
            background: white;
        }
        
        .ocr-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .ocr-control-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .ocr-process-btn {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
        }
        
        .ocr-process-btn:hover {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            transform: translateY(-2px);
        }
        
        .ocr-clear-btn {
            background: #e0e0e0;
            color: #333;
        }
        
        .ocr-clear-btn:hover {
            background: #d0d0d0;
        }
        
        .language-selector {
            padding: 10px 20px;
            border-radius: 8px;
            border: 2px solid #3498db;
            background: white;
            font-size: 1rem;
            margin: 10px 0;
            width: 100%;
        }
        
        .ocr-progress {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .ocr-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #9b59b6, #3498db);
            border-radius: 5px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .ocr-status {
            text-align: center;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            font-weight: 500;
        }
        
        .ocr-status-processing {
            background: rgba(52, 152, 219, 0.1);
            border: 2px solid #3498db;
            color: #3498db;
        }
        
        .ocr-status-success {
            background: rgba(39, 174, 96, 0.1);
            border: 2px solid #27ae60;
            color: #27ae60;
        }
        
        .ocr-status-error {
            background: rgba(231, 76, 60, 0.1);
            border: 2px solid #e74c3c;
            color: #e74c3c;
        }
        
        .text-correction-tool {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 3px solid #f39c12;
            box-shadow: 0 10px 30px rgba(243, 156, 18, 0.15);
        }
        
        .correction-area {
            min-height: 150px;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            font-size: 1.2rem;
            line-height: 1.8;
            margin: 20px 0;
            background: #f9f9f9;
            font-family: 'Arial', sans-serif;
        }
        
        .suggestions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        
        .suggestion-btn {
            padding: 8px 20px;
            background: #e3f2fd;
            border: 2px solid #3498db;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .suggestion-btn:hover {
            background: #3498db;
            color: white;
        }
        
        .arabic-font-example {
            font-family: 'Arial', sans-serif;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 15px 0;
            border-right: 4px solid #2c3e50;
            line-height: 2;
        }
        
        .handwriting-tips {
            background: #fff8e1;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-right: 5px solid #f39c12;
        }
        
        .handwriting-tips h4 {
            color: #f39c12;
            margin-top: 0;
        }
        
        .handwriting-tips ul {
            margin: 10px 0;
            padding-right: 20px;
        }
        
        .handwriting-tips li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .sample-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .sample-image {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .sample-image:hover {
            border-color: #3498db;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }
        
        .sample-image img {
            max-width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .accuracy-meter {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .accuracy-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .accuracy-label {
            color: #666;
        }
        
        .ocr-languages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .language-btn {
            padding: 12px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .language-btn:hover {
            border-color: #3498db;
            background: #e3f2fd;
        }
        
        .language-btn.active {
            border-color: #27ae60;
            background: rgba(39, 174, 96, 0.1);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù‡ÙŠÙƒÙ„ ÙƒÙ…Ø§ Ù‡Ùˆ -->
        
        <!-- Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ Ù„Ù€ OCR -->
        <div id="ocrSection" class="card hidden">
            <h2><i class="fas fa-font"></i> Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ù…ÙƒØªÙˆØ¨ Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯</h2>
            
            <div class="handwriting-tips">
                <h4><i class="fas fa-lightbulb"></i> Ù†ØµØ§Ø¦Ø­ Ù„Ù‚Ø±Ø§Ø¡Ø© Ø£ÙØ¶Ù„:</h4>
                <ul>
                    <li>Ø§ÙƒØªØ¨ Ø¨Ø®Ø· ÙˆØ§Ø¶Ø­ ÙˆÙ…Ù†Ø¸Ù…</li>
                    <li>Ø§Ø³ØªØ®Ø¯Ù… Ù‚Ù„Ù… Ø£Ø²Ø±Ù‚ Ø£Ùˆ Ø£Ø³ÙˆØ¯ Ø¯Ø§ÙƒÙ†</li>
                    <li>Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙˆØ§Ø¶Ø­Ø©</li>
                    <li>ØªØ¬Ù†Ø¨ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø®Ø· Ù…Ø§Ø¦Ù„ Ø¬Ø¯Ø§Ù‹</li>
                    <li>Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ø¶Ø§Ø¡Ø© Ø¬ÙŠØ¯Ø§Ù‹</li>
                </ul>
            </div>
            
            <div class="upload-area" onclick="openOCRScanner()">
                <i class="fas fa-camera"></i>
                <p>Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ù„Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ©</p>
                <span>Ø£Ùˆ Ù‚Ù… Ø¨Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</span>
            </div>
            
            <input type="file" id="ocrFileInput" accept="image/*" class="hidden" onchange="handleOCRFileUpload(event)">
            
            <div class="sample-images">
                <div class="sample-image" onclick="loadSampleImage('arabic1')">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlhdGg9IjEwMCUiIGZpbGw9IiNmMGYwZjAiLz4KICAgIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjMzMzIj4KICAgICAgIC Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯<br/>Ø§Ù„Ø±Ù‚Ù…: Ù¡Ù¢Ù£Ù¤Ù¥<br/>Ø§Ù„ØµÙ: Ø§Ù„Ø¹Ø§Ø´Ø± Ø£
ICAgIDwvdGV4dD4KPC9zdmc+" alt="Ø¹ÙŠÙ†Ø© ÙƒØªØ§Ø¨Ø© Ø¹Ø±Ø¨ÙŠØ©">
                    <p>Ø¹ÙŠÙ†Ø© ÙƒØªØ§Ø¨Ø© Ø¹Ø±Ø¨ÙŠØ©</p>
                </div>
                <div class="sample-image" onclick="loadSampleImage('numbers')">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlhdGg9IjEwMCUiIGZpbGw9IiNmMGYwZjAiLz4KICAgIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjMzMzIj4KICAgICAgICAÙ¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©Ù 
ICAgIDwvdGV4dD4KPC9zdmc+" alt="Ø¹ÙŠÙ†Ø© Ø£Ø±Ù‚Ø§Ù…">
                    <p>Ø£Ø±Ù‚Ø§Ù… Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯</p>
                </div>
                <div class="sample-image" onclick="loadSampleImage('mixed')">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmMGYwZjAiLz4KICAgIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjMzMzIj4KICAgICAgIC Ø§Ù„Ø·Ø§Ù„Ø¨: Ø³Ø§Ù…ÙŠ Ø­Ø³Ù†<br/>Ø§Ù„Ø±Ù‚Ù…: Ù¢Ù£Ù¤Ù§Ù¦<br/>Ø§Ù„ØªØ§Ø±ÙŠØ®: Ù¡Ù¤Ù¤Ù¥/Ù Ù¦/Ù¡Ù¥
ICAgIDwvdGV4dD4KPC9zdmc+" alt="Ø¹ÙŠÙ†Ø© Ù…Ø®ØªÙ„Ø·Ø©">
                    <p>Ù†Øµ Ù…Ø®ØªÙ„Ø· Ø¹Ø±Ø¨ÙŠ ÙˆØ£Ø±Ù‚Ø§Ù…</p>
                </div>
            </div>
            
            <!-- Ù…Ù†Ø·Ù‚Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø© -->
            <div class="ocr-zone" id="ocrCanvasContainer">
                <canvas id="handwritingCanvas" class="handwriting-canvas"></canvas>
                <div class="ocr-controls">
                    <button onclick="enhanceImage()" class="ocr-control-btn">
                        <i class="fas fa-magic"></i> ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©
                    </button>
                    <button onclick="cropImage()" class="ocr-control-btn">
                        <i class="fas fa-crop"></i> Ø§Ù‚ØªØµØ§Øµ
                    </button>
                    <button onclick="rotateImage()" class="ocr-control-btn">
                        <i class="fas fa-redo"></i> ØªØ¯ÙˆÙŠØ±
                    </button>
                    <button onclick="clearOCRCanvas()" class="ocr-control-btn ocr-clear-btn">
                        <i class="fas fa-trash"></i> Ù…Ø³Ø­
                    </button>
                </div>
            </div>
            
            <!-- Ø§Ø®ØªÙŠØ§Ø± Ù„ØºØ© OCR -->
            <div class="form-group">
                <label><i class="fas fa-language"></i> Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©</label>
                <div class="ocr-languages">
                    <div class="language-btn active" onclick="selectOCRLanguage('ara')">
                        Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                    </div>
                    <div class="language-btn" onclick="selectOCRLanguage('eng')">
                        Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
                    </div>
                    <div class="language-btn" onclick="selectOCRLanguage('ara+eng')">
                        Ù…Ø®ØªÙ„Ø·
                    </div>
                    <div class="language-btn" onclick="selectOCRLanguage('ara_numbers')">
                        Ø£Ø±Ù‚Ø§Ù… Ø¹Ø±Ø¨ÙŠØ©
                    </div>
                </div>
            </div>
            
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
            <div class="ocr-progress">
                <div class="ocr-progress-bar" id="ocrProgressBar"></div>
            </div>
            
            <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© -->
            <div id="ocrStatus" class="ocr-status"></div>
            
            <!-- Ø¨Ø¯Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© OCR -->
            <button onclick="processOCR()" class="btn btn-primary" style="margin: 20px 0;">
                <i class="fas fa-robot"></i> Ø¨Ø¯Ø¡ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ
            </button>
            
            <!-- Ù†ØªØ§Ø¦Ø¬ OCR -->
            <div id="ocrResults" class="ocr-results hidden">
                <h3><i class="fas fa-list-check"></i> Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©:</h3>
                <div id="ocrResultsContent"></div>
                
                <div class="accuracy-meter">
                    <div class="accuracy-value" id="accuracyValue">0%</div>
                    <div class="accuracy-label">Ø¯Ù‚Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</div>
                </div>
                
                <div class="text-correction-tool">
                    <h4><i class="fas fa-edit"></i> ØªØµØ­ÙŠØ­ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡:</h4>
                    <div class="correction-area" id="correctionArea" contenteditable="true">
                        Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§...
                    </div>
                    
                    <div class="suggestions" id="suggestionsContainer">
                        <!-- Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                    </div>
                    
                    <button onclick="applyOCRCorrections()" class="btn btn-success">
                        <i class="fas fa-check"></i> ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµØ­ÙŠØ­Ø§Øª
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù…Ø§Ø³Ø­ OCR -->
    <div id="ocrScanner" class="modal hidden">
        <div class="close-modal" onclick="closeOCRScanner()">
            <i class="fas fa-times"></i>
        </div>
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 20px;">
                <i class="fas fa-font"></i> Ù…Ø³Ø­ Ù†Øµ Ù…ÙƒØªÙˆØ¨ Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯
            </h2>
            
            <div style="text-align: center; margin: 20px 0;">
                <div class="arabic-font-example">
                    <strong>Ø§ÙƒØªØ¨ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„:</strong><br>
                    Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: ________<br>
                    Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: ________<br>
                    Ø§Ù„ØµÙ: ________
                </div>
            </div>
            
            <video id="ocrVideo" autoplay style="width: 100%; border-radius: 10px;"></video>
            <canvas id="ocrCaptureCanvas" class="hidden"></canvas>
            
            <div style="text-align: center; margin: 30px 0;">
                <button onclick="captureOCRImage()" class="btn btn-success" style="width: 80px; height: 80px; border-radius: 50%;">
                    <i class="fas fa-camera fa-2x"></i>
                </button>
                <p style="color: #666; margin-top: 15px;">Ø§Ø¶ØºØ· Ù„Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù†Øµ</p>
            </div>
        </div>
    </div>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª OCR
        let ocrStream = null;
        let currentOCRLanguage = 'ara';
        let ocrImageData = null;
        let tesseractWorker = null;
        
        // ØªØ­Ø³ÙŠÙ† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', function() {
            // Ø¥Ø¶Ø§ÙØ© Ø²Ø± OCR Ø¥Ù„Ù‰ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„
            const navRow = document.querySelector('.row');
            const ocrButton = document.createElement('button');
            ocrButton.className = 'btn ocr-process-btn';
            ocrButton.innerHTML = '<i class="fas fa-font"></i> Ù‚Ø±Ø§Ø¡Ø© Ø®Ø· Ø§Ù„ÙŠØ¯';
            ocrButton.onclick = () => showOCRSection();
            navRow.appendChild(ocrButton);
        });
        
        function showOCRSection() {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.card').forEach(card => {
                card.classList.add('hidden');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… OCR
            document.getElementById('ocrSection').classList.remove('hidden');
        }
        
        // ÙØªØ­ Ù…Ø§Ø³Ø­ OCR
        function openOCRScanner() {
            document.getElementById('ocrScanner').classList.remove('hidden');
            
            navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: 'environment',
                    width: { ideal: 1920 },
                    height: { ideal: 1080 }
                } 
            }).then(stream => {
                ocrStream = stream;
                const video = document.getElementById('ocrVideo');
                video.srcObject = stream;
                video.play();
            }).catch(error => {
                showAlert('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ' + error.message, 'error');
                closeOCRScanner();
            });
        }
        
        function closeOCRScanner() {
            if (ocrStream) {
                ocrStream.getTracks().forEach(track => track.stop());
                ocrStream = null;
            }
            document.getElementById('ocrScanner').classList.add('hidden');
        }
        
        function captureOCRImage() {
            const video = document.getElementById('ocrVideo');
            const canvas = document.getElementById('ocrCaptureCanvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            const imageData = canvas.toDataURL('image/jpeg', 0.9);
            loadOCRImage(imageData);
            closeOCRScanner();
        }
        
        function handleOCRFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    loadOCRImage(e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }
        
        function loadOCRImage(imageData) {
            ocrImageData = imageData;
            const canvas = document.getElementById('handwritingCanvas');
            const ctx = canvas.getContext('2d');
            
            const img = new Image();
            img.onload = function() {
                // ØªØ­Ø¯ÙŠØ¯ Ø­Ø¬Ù… Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¹Ø±Ø¶
                const maxWidth = 800;
                const maxHeight = 600;
                
                let width = img.width;
                let height = img.height;
                
                if (width > maxWidth) {
                    height = (maxWidth / width) * height;
                    width = maxWidth;
                }
                
                if (height > maxHeight) {
                    width = (maxHeight / height) * width;
                    height = maxHeight;
                }
                
                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);
                
                document.getElementById('ocrCanvasContainer').classList.add('active');
                showAlert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
            };
            img.src = imageData;
        }
        
        function loadSampleImage(type) {
            let sampleData = '';
            
            switch(type) {
                case 'arabic1':
                    sampleData = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmZmZmZmYiLz4KICAgIDx0ZXh0IHg9IjUwJSIgeT0iMzAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjMDAwIj4KICAgICAgIC Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ<br/>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: Ù¡Ù¢Ù£Ù¤Ù¥<br/>Ø§Ù„ØµÙ: Ø§Ù„Ø¹Ø§Ø´Ø± - Ø£
ICAgIDwvdGV4dD4KPC9zdmc+';
                    break;
                case 'numbers':
                    sampleData = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmZmZmZmYiLz4KICAgIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMzYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjMDAwIj4KICAgICAgICAÙ¡ Ù¢ Ù£ Ù¤ Ù¥ Ù¦ Ù§ Ù¨ Ù© Ù 
ICAgIDwvdGV4dD4KPC9zdmc+';
                    break;
                case 'mixed':
                    sampleData = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNmZmZmZmYiLz4KICAgIDx0ZXh0IHg9IjUwJSIgeT0iNDAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSIjMDAwIj4KICAgICAgIC Ø§Ù„Ø·Ø§Ù„Ø¨: Ø³Ø§Ø±Ø© Ø®Ø§Ù„Ø¯ Ø£Ø­Ù…Ø¯<br/>Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ©<br/>Ø§Ù„Ø±Ù‚Ù…: Ù¨Ù§Ù¦Ù¥Ù¤<br/>Ø§Ù„ØªØ§Ø±ÙŠØ®: Ù¡Ù¤Ù¤Ù¥/Ù Ù¦/Ù¢Ù 
ICAgIDwvdGV4dD4KPC9zdmc+';
                    break;
            }
            
            loadOCRImage(sampleData);
            showAlert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¹ÙŠÙ†Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©', 'success');
        }
        
        // ÙˆØ¸Ø§Ø¦Ù ØªØ­Ø³ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø©
        function enhanceImage() {
            const canvas = document.getElementById('handwritingCanvas');
            const ctx = canvas.getContext('2d');
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            
            // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¨Ø§ÙŠÙ†
            const data = imageData.data;
            const contrast = 1.5;
            const brightness = 10;
            
            for (let i = 0; i < data.length; i += 4) {
                // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¨Ø§ÙŠÙ†
                data[i] = contrast * (data[i] - 128) + 128 + brightness;
                data[i + 1] = contrast * (data[i + 1] - 128) + 128 + brightness;
                data[i + 2] = contrast * (data[i + 2] - 128) + 128 + brightness;
                
                // ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø³Ø·ÙˆØ¹
                data[i] = Math.min(255, Math.max(0, data[i]));
                data[i + 1] = Math.min(255, Math.max(0, data[i + 1]));
                data[i + 2] = Math.min(255, Math.max(0, data[i + 2]));
            }
            
            ctx.putImageData(imageData, 0, 0);
            showAlert('ØªÙ… ØªØ­Ø³ÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„ØµÙˆØ±Ø©', 'success');
        }
        
        function cropImage() {
            // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø£Ø¯ÙˆØ§Øª Ø§Ù‚ØªØµØ§Øµ ØªÙØ§Ø¹Ù„ÙŠØ©
            showAlert('Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø§Ù„Ù†Ù‚Ø± ÙˆØ§Ù„Ø³Ø­Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©', 'info');
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© Ù…Ø«Ù„ Cropper.js Ù‡Ù†Ø§
        }
        
        function rotateImage() {
            const canvas = document.getElementById('handwritingCanvas');
            const ctx = canvas.getContext('2d');
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            
            tempCanvas.width = canvas.height;
            tempCanvas.height = canvas.width;
            
            tempCtx.translate(tempCanvas.width / 2, tempCanvas.height / 2);
            tempCtx.rotate(Math.PI / 2);
            tempCtx.drawImage(canvas, -canvas.width / 2, -canvas.height / 2);
            
            canvas.width = tempCanvas.width;
            canvas.height = tempCanvas.height;
            ctx.drawImage(tempCanvas, 0, 0);
            
            showAlert('ØªÙ… ØªØ¯ÙˆÙŠØ± Ø§Ù„ØµÙˆØ±Ø© 90 Ø¯Ø±Ø¬Ø©', 'success');
        }
        
        function clearOCRCanvas() {
            const canvas = document.getElementById('handwritingCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('ocrCanvasContainer').classList.remove('active');
            document.getElementById('ocrResults').classList.add('hidden');
            ocrImageData = null;
        }
        
        function selectOCRLanguage(lang) {
            currentOCRLanguage = lang;
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const langNames = {
                'ara': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
                'eng': 'Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©',
                'ara+eng': 'Ù…Ø®ØªÙ„Ø·',
                'ara_numbers': 'Ø£Ø±Ù‚Ø§Ù… Ø¹Ø±Ø¨ÙŠØ©'
            };
            
            showAlert(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù„ØºØ©: ${langNames[lang]}`, 'success');
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© OCR Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Tesseract.js
        async function processOCR() {
            if (!ocrImageData) {
                showAlert('ÙŠØ±Ø¬Ù‰ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            const statusDiv = document.getElementById('ocrStatus');
            const progressBar = document.getElementById('ocrProgressBar');
            const resultsDiv = document.getElementById('ocrResults');
            const resultsContent = document.getElementById('ocrResultsContent');
            const correctionArea = document.getElementById('correctionArea');
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
            statusDiv.className = 'ocr-status ocr-status-processing';
            statusDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© OCR...';
            progressBar.style.width = '0%';
            resultsDiv.classList.add('hidden');
            
            try {
                // Ø¥Ø¹Ø¯Ø§Ø¯ Tesseract
                const langMap = {
                    'ara': 'ara',
                    'eng': 'eng',
                    'ara+eng': 'ara+eng',
                    'ara_numbers': 'ara'
                };
                
                const language = langMap[currentOCRLanguage];
                
                // Ø¥Ù†Ø´Ø§Ø¡ Worker Ø¬Ø¯ÙŠØ¯
                if (tesseractWorker) {
                    await tesseractWorker.terminate();
                }
                
                tesseractWorker = await Tesseract.createWorker({
                    logger: (m) => updateOCRProgress(m, progressBar, statusDiv)
                });
                
                await tesseractWorker.loadLanguage(language);
                await tesseractWorker.initialize(language);
                
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø©
                statusDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø©...';
                
                const result = await tesseractWorker.recognize(ocrImageData);
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                displayOCRResults(result, resultsContent, correctionArea);
                updateAccuracyMeter(result);
                showSuggestions(result.text);
                
                resultsDiv.classList.remove('hidden');
                statusDiv.className = 'ocr-status ocr-status-success';
                statusDiv.innerHTML = '<i class="fas fa-check-circle"></i> ØªÙ…Øª Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ Ø¨Ù†Ø¬Ø§Ø­!';
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ OCR:', error);
                statusDiv.className = 'ocr-status ocr-status-error';
                statusDiv.innerHTML = `<i class="fas fa-exclamation-circle"></i> Ø®Ø·Ø£: ${error.message}`;
                showAlert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù†Øµ', 'error');
            }
        }
        
        function updateOCRProgress(message, progressBar, statusDiv) {
            if (message.status === 'recognizing text') {
                const progress = message.progress || 0;
                progressBar.style.width = `${progress * 100}%`;
                
                if (progress < 0.3) {
                    statusDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©...';
                } else if (progress < 0.6) {
                    statusDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø­Ø±Ù...';
                } else {
                    statusDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù†Øµ...';
                }
            }
        }
        
        function displayOCRResults(result, container, correctionArea) {
            let html = '';
            
            if (result.data.words && result.data.words.length > 0) {
                result.data.words.forEach((word, index) => {
                    const confidence = Math.round(word.confidence);
                    let confidenceClass = 'confidence-low';
                    
                    if (confidence > 80) confidenceClass = 'confidence-high';
                    else if (confidence > 60) confidenceClass = 'confidence-medium';
                    
                    html += `
                        <div class="ocr-result-item">
                            <strong>${word.text}</strong>
                            <span class="ocr-confidence ${confidenceClass}">
                                ${confidence}%
                            </span>
                            <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                                Ø§Ù„Ù…ÙˆÙ‚Ø¹: (${Math.round(word.bbox.x0)}, ${Math.round(word.bbox.y0)})
                            </div>
                        </div>
                    `;
                });
            }
            
            container.innerHTML = html;
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØµØ­ÙŠØ­
            const fullText = result.data.text || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†Øµ';
            correctionArea.innerHTML = fullText.replace(/\n/g, '<br>');
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            extractStudentInfoFromOCR(fullText);
        }
        
        function extractStudentInfoFromOCR(text) {
            const patterns = {
                name: /(?:Ø§Ø³Ù…|Ø§Ù„Ø·Ø§Ù„Ø¨|Ø§Ù„Ø§Ø³Ù…)[\s:]*([^\n\r\d]+)/i,
                id: /(?:Ø±Ù‚Ù…|Ø§Ù„Ø±Ù‚Ù…|Ø±Ù…Ø²)[\s:]*([Ù -Ù©0-9]+)/i,
                class: /(?:ØµÙ|Ø§Ù„ØµÙ|Ø§Ù„ÙØµÙ„)[\s:]*([^\n\r]+)/i
            };
            
            const extractedInfo = {};
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø§Ø³Ù…
            const nameMatch = text.match(patterns.name);
            if (nameMatch && nameMatch[1]) {
                extractedInfo.name = nameMatch[1].trim();
            }
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø±Ù‚Ù…
            const idMatch = text.match(patterns.id);
            if (idMatch && idMatch[1]) {
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¥Ù„Ù‰ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø¥Ø°Ø§ Ù„Ø²Ù…
                let id = idMatch[1];
                id = id.replace(/[Ù -Ù©]/g, d => 'Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©'.indexOf(d));
                extractedInfo.id = id;
            }
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ØµÙ
            const classMatch = text.match(patterns.class);
            if (classMatch && classMatch[1]) {
                extractedInfo.class = classMatch[1].trim();
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
            if (extractedInfo.name) {
                document.getElementById('studentName').value = extractedInfo.name;
                showAlert(`ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³Ù…: ${extractedInfo.name}`, 'success');
            }
            
            if (extractedInfo.id) {
                const idDigits = extractedInfo.id.toString().split('');
                const idInputs = document.querySelectorAll('.student-id-input');
                idInputs.forEach((input, index) => {
                    if (idDigits[index]) {
                        input.value = idDigits[index];
                    }
                });
                showAlert(`ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù…: ${extractedInfo.id}`, 'success');
            }
            
            updateStudentInfo();
        }
        
        function updateAccuracyMeter(result) {
            const accuracyValue = document.getElementById('accuracyValue');
            let avgConfidence = 0;
            
            if (result.data.words && result.data.words.length > 0) {
                const confidences = result.data.words.map(w => w.confidence);
                avgConfidence = confidences.reduce((a, b) => a + b, 0) / confidences.length;
            }
            
            const accuracy = Math.min(100, Math.max(0, Math.round(avgConfidence)));
            accuracyValue.textContent = `${accuracy}%`;
            
            // ØªÙ„ÙˆÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø¯Ù‚Ø©
            if (accuracy > 80) {
                accuracyValue.style.color = '#27ae60';
            } else if (accuracy > 60) {
                accuracyValue.style.color = '#f39c12';
            } else {
                accuracyValue.style.color = '#e74c3c';
            }
        }
        
        function showSuggestions(text) {
            const suggestionsContainer = document.getElementById('suggestionsContainer');
            suggestionsContainer.innerHTML = '';
            
            // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª
            const words = text.split(/\s+/);
            const commonMistakes = {
                'Ø§Ù„Ø·Ø§Ù„Ø¨': ['Ø§Ù„Ø·Ø§Ù„Ø¨', 'Ø§Ù„Ø·Ø§Ù„Ø¨', 'Ø§Ù„Ø·Ù„Ø§Ø¨'],
                'Ø§Ø³Ù…': ['Ø§Ø³Ù…', 'Ø§Ù„Ø§Ø³Ù…', 'Ø§Ø³Ù…Ø§Ø¡'],
                'Ø±Ù‚Ù…': ['Ø±Ù‚Ù…', 'Ø§Ù„Ø±Ù‚Ù…', 'Ø§Ø±Ù‚Ø§Ù…'],
                'ØµÙ': ['ØµÙ', 'Ø§Ù„ØµÙ', 'ØµÙÙˆÙ']
            };
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
            Object.keys(commonMistakes).forEach(key => {
                if (text.includes(key)) {
                    commonMistakes[key].forEach(suggestion => {
                        const btn = document.createElement('button');
                        btn.className = 'suggestion-btn';
                        btn.textContent = suggestion;
                        btn.onclick = () => replaceInText(key, suggestion);
                        suggestionsContainer.appendChild(btn);
                    });
                }
            });
        }
        
        function replaceInText(oldText, newText) {
            const correctionArea = document.getElementById('correctionArea');
            let currentText = correctionArea.innerHTML.replace(/<br>/g, '\n');
            currentText = currentText.replace(oldText, newText);
            correctionArea.innerHTML = currentText.replace(/\n/g, '<br>');
        }
        
        function applyOCRCorrections() {
            const correctionArea = document.getElementById('correctionArea');
            const correctedText = correctionArea.innerHTML.replace(/<br>/g, '\n');
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØµØ­Ø­
            extractStudentInfoFromOCR(correctedText);
            
            showAlert('ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµØ­ÙŠØ­Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }
        
        // Ø¯Ù…Ø¬ OCR Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
        function enhancedProcessImage() {
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… OCR Ø£ÙˆÙ„Ø§Ù‹
            const canvas = document.getElementById('previewCanvas');
            const imageData = canvas.toDataURL('image/jpeg');
            
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙŠ OCR
            loadOCRImage(imageData);
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù‚Ø³Ù… OCR
            showOCRSection();
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ¸ÙŠÙØ© processCapturedImage
        function processCapturedImage(imageData) {
            showLoading(true);
            
            const img = new Image();
            img.onload = function() {
                const canvas = document.getElementById('previewCanvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = Math.min(img.width, 800);
                canvas.height = (img.height / img.width) * canvas.width;
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                // Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø± OCR
                showOCRPrompt();
                
                elements.previewContainer.classList.remove('hidden');
                showLoading(false);
            };
            img.src = imageData;
        }
        
        function showOCRPrompt() {
            const promptHTML = `
                <div class="card" style="margin-top: 20px; background: #e3f2fd; border-color: #3498db;">
                    <h3><i class="fas fa-font"></i> Ø§ÙƒØªØ´Ø§Ù Ù†Øµ Ù…ÙƒØªÙˆØ¨</h3>
                    <p>ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ø§Ù„ØµÙˆØ±Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†Øµ Ù…ÙƒØªÙˆØ¨ Ø¨Ø®Ø· Ø§Ù„ÙŠØ¯. Ù‡Ù„ ØªØ±ÙŠØ¯ Ù‚Ø±Ø§Ø¡ØªÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŸ</p>
                    <div class="row">
                        <button onclick="startOCRFromPreview()" class="btn btn-success">
                            <i class="fas fa-robot"></i> Ù†Ø¹Ù…ØŒ Ø§Ù‚Ø±Ø£ Ø§Ù„Ù†Øµ
                        </button>
                        <button onclick="skipOCR()" class="btn btn-outline">
                            <i class="fas fa-forward"></i> ØªØ®Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('previewContainer').insertAdjacentHTML('beforeend', promptHTML);
        }
        
        function startOCRFromPreview() {
            const canvas = document.getElementById('previewCanvas');
            const imageData = canvas.toDataURL('image/jpeg');
            loadOCRImage(imageData);
            showOCRSection();
            
            // Ø¥Ø²Ø§Ù„Ø© prompt
            document.querySelector('.card[style*="e3f2fd"]')?.remove();
        }
        
        function skipOCR() {
            document.querySelector('.card[style*="e3f2fd"]')?.remove();
            simulateOMRDetection();
        }
        
        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
        function showAlert(message, type = 'success') {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                ${message}
            `;
            
            document.querySelector('.container').insertBefore(alert, document.querySelector('.container').firstChild);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }
        
        // Ø¥Ø¶Ø§ÙØ© drag and drop Ù„Ù€ OCR
        document.addEventListener('DOMContentLoaded', function() {
            const ocrZone = document.getElementById('ocrCanvasContainer');
            
            ocrZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                e.stopPropagation();
                ocrZone.style.backgroundColor = 'rgba(155, 89, 182, 0.2)';
            });
            
            ocrZone.addEventListener('dragleave', function(e) {
                e.preventDefault();
                e.stopPropagation();
                ocrZone.style.backgroundColor = '';
            });
            
            ocrZone.addEventListener('drop', function(e) {
                e.preventDefault();
                e.stopPropagation();
                ocrZone.style.backgroundColor = '';
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleOCRFileUpload({ target: { files } });
                }
            });
        });
    </script>
</body>
</html>
