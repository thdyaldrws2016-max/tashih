<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø¢Ù„ÙŠ SamieGrade</title>
    <style>
        /* Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #ffffff;
            direction: rtl;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .login-container {
            width: 100%;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo h1 {
            font-size: 2.5rem;
            color: #4cc9f0;
            margin-bottom: 10px;
        }
        
        .logo p {
            color: #94a3b8;
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #cbd5e1;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.1);
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4cc9f0 0%, #4361ee 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 201, 240, 0.3);
        }
        
        .login-footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #6ee7b7;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .login-container {
                padding: 30px 20px;
            }
            
            .logo h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">
            <h1>ğŸ“ SamieGrade</h1>
            <p>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø¢Ù„ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</p>
        </div>
        
        <div id="error-message" class="error-message"></div>
        <div id="success-message" class="success-message"></div>
        
        <form id="login-form">
            <div class="form-group">
                <label for="teacher-name">ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                <input type="text" id="teacher-name" class="form-control" 
                       placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" required
                       autocomplete="name">
            </div>
            
            <div class="form-group">
                <label for="teacher-email">ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                <input type="email" id="teacher-email" class="form-control" 
                       placeholder="example@school.edu.sa" required
                       autocomplete="email">
            </div>
            
            <div class="form-group">
                <label for="teacher-school">ğŸ« Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</label>
                <input type="text" id="teacher-school" class="form-control" 
                       placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø£Ùˆ Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©"
                       autocomplete="organization">
            </div>
            
            <button type="submit" class="btn btn-primary" id="login-btn">
                ğŸš€ Ø¨Ø¯Ø¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
            </button>
        </form>
        
        <div class="login-footer">
            <p>âœ¨ Ø£ÙˆÙ„ Ù†Ø¸Ø§Ù… Ø¹Ø±Ø¨ÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø¢Ù„ÙŠ</p>
            <p style="margin-top: 5px; font-size: 0.8rem;">ÙŠØ¯Ø¹Ù… Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø°ÙƒÙŠ</p>
        </div>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø¢Ù„ÙŠ SamieGrade - Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ø·Ø©
        class SamieGradeSystem {
            constructor() {
                this.currentTeacher = null;
                this.currentExam = null;
                this.currentStep = 'login';
                this.data = this.loadData();
            }
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
            loadData() {
                try {
                    const savedData = localStorage.getItem('samiegrade_data');
                    return savedData ? JSON.parse(savedData) : {
                        teachers: [],
                        exams: [],
                        results: [],
                        lastLogin: null
                    };
                } catch (error) {
                    console.log('Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© - Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ø§Ø¨Ù‚Ø©');
                    return {
                        teachers: [],
                        exams: [],
                        results: [],
                        lastLogin: null
                    };
                }
            }
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage
            saveData() {
                try {
                    localStorage.setItem('samiegrade_data', JSON.stringify(this.data));
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                }
            }
            
            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
            showError(message) {
                const errorDiv = document.getElementById('error-message');
                if (errorDiv) {
                    errorDiv.textContent = message;
                    errorDiv.style.display = 'block';
                    
                    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
                    setTimeout(() => {
                        errorDiv.style.display = 'none';
                    }, 5000);
                }
            }
            
            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
            showSuccess(message) {
                const successDiv = document.getElementById('success-message');
                if (successDiv) {
                    successDiv.textContent = message;
                    successDiv.style.display = 'block';
                    
                    setTimeout(() => {
                        successDiv.style.display = 'none';
                    }, 3000);
                }
            }
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            handleLogin(event) {
                event.preventDefault();
                
                // Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠ Ø±Ø³Ø§Ø¦Ù„ Ø³Ø§Ø¨Ù‚Ø©
                document.getElementById('error-message').style.display = 'none';
                document.getElementById('success-message').style.display = 'none';
                
                // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                const teacherName = document.getElementById('teacher-name').value.trim();
                const teacherEmail = document.getElementById('teacher-email').value.trim();
                const teacherSchool = document.getElementById('teacher-school').value.trim();
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                if (!teacherName || !teacherEmail) {
                    this.showError('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ');
                    return;
                }
                
                if (!this.isValidEmail(teacherEmail)) {
                    this.showError('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­');
                    return;
                }
                
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¹Ù„Ù… ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                let teacher = this.data.teachers.find(t => t.email === teacherEmail);
                
                if (!teacher) {
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø¹Ù„Ù…
                    teacher = {
                        id: Date.now().toString(),
                        name: teacherName,
                        email: teacherEmail,
                        school: teacherSchool || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
                        createdAt: new Date().toISOString(),
                        lastLogin: new Date().toISOString(),
                        examsCount: 0,
                        studentsCount: 0
                    };
                    
                    this.data.teachers.push(teacher);
                    this.showSuccess(`âœ… Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ${teacherName}ØŒ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!`);
                } else {
                    // ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
                    teacher.lastLogin = new Date().toISOString();
                    teacher.name = teacherName; // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø³Ù… Ø¥Ø°Ø§ ØªØºÙŠØ±
                    teacher.school = teacherSchool || teacher.school;
                    this.showSuccess(`âœ… Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ ${teacherName}!`);
                }
                
                // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                this.data.lastLogin = new Date().toISOString();
                this.saveData();
                
                // ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                this.currentTeacher = teacher;
                sessionStorage.setItem('currentTeacher', JSON.stringify(teacher));
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© ÙˆØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…
                const loginBtn = document.getElementById('login-btn');
                if (loginBtn) {
                    loginBtn.innerHTML = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡...';
                    loginBtn.disabled = true;
                }
                
                // ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·
                setTimeout(() => {
                    this.loadDashboard();
                }, 1500);
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
            isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            // ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            loadDashboard() {
                document.body.innerHTML = `
                    <style>
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                        }
                        
                        body {
                            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                            color: #ffffff;
                            min-height: 100vh;
                            padding: 20px;
                        }
                        
                        .dashboard-container {
                            max-width: 1200px;
                            margin: 0 auto;
                        }
                        
                        .dashboard-header {
                            background: rgba(255, 255, 255, 0.1);
                            backdrop-filter: blur(10px);
                            border-radius: 15px;
                            padding: 25px;
                            margin-bottom: 30px;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            border: 1px solid rgba(255, 255, 255, 0.1);
                        }
                        
                        .welcome-message h1 {
                            color: #4cc9f0;
                            margin-bottom: 10px;
                        }
                        
                        .welcome-message p {
                            color: #94a3b8;
                        }
                        
                        .logout-btn {
                            background: rgba(239, 68, 68, 0.2);
                            color: #fca5a5;
                            border: 1px solid rgba(239, 68, 68, 0.3);
                            padding: 10px 20px;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: 600;
                            transition: all 0.3s ease;
                        }
                        
                        .logout-btn:hover {
                            background: rgba(239, 68, 68, 0.3);
                            transform: translateY(-2px);
                        }
                        
                        .dashboard-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                            gap: 25px;
                            margin-bottom: 40px;
                        }
                        
                        .dashboard-card {
                            background: rgba(255, 255, 255, 0.08);
                            border-radius: 15px;
                            padding: 30px;
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            transition: all 0.3s ease;
                            cursor: pointer;
                        }
                        
                        .dashboard-card:hover {
                            transform: translateY(-5px);
                            background: rgba(255, 255, 255, 0.12);
                            border-color: #4cc9f0;
                        }
                        
                        .card-icon {
                            font-size: 3rem;
                            margin-bottom: 20px;
                            color: #4cc9f0;
                        }
                        
                        .card-title {
                            font-size: 1.3rem;
                            margin-bottom: 10px;
                            color: #ffffff;
                        }
                        
                        .card-description {
                            color: #94a3b8;
                            line-height: 1.6;
                        }
                        
                        .quick-stats {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                            gap: 20px;
                            margin-top: 30px;
                        }
                        
                        .stat-item {
                            background: rgba(255, 255, 255, 0.05);
                            padding: 20px;
                            border-radius: 10px;
                            text-align: center;
                        }
                        
                        .stat-value {
                            font-size: 2rem;
                            font-weight: bold;
                            color: #4cc9f0;
                            margin-bottom: 5px;
                        }
                        
                        .stat-label {
                            color: #94a3b8;
                            font-size: 0.9rem;
                        }
                        
                        .footer {
                            text-align: center;
                            margin-top: 50px;
                            padding-top: 20px;
                            border-top: 1px solid rgba(255, 255, 255, 0.1);
                            color: #94a3b8;
                            font-size: 0.9rem;
                        }
                        
                        @media (max-width: 768px) {
                            .dashboard-grid {
                                grid-template-columns: 1fr;
                            }
                            
                            .dashboard-header {
                                flex-direction: column;
                                gap: 20px;
                                text-align: center;
                            }
                        }
                    </style>
                    
                    <div class="dashboard-container">
                        <div class="dashboard-header">
                            <div class="welcome-message">
                                <h1>ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ ${this.currentTeacher.name}!</h1>
                                <p>Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù†Ø¸Ø§Ù… SamieGrade Ù„Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø¢Ù„ÙŠ</p>
                            </div>
                            <button class="logout-btn" onclick="system.logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
                        </div>
                        
                        <div class="dashboard-grid">
                            <div class="dashboard-card" onclick="system.loadCreateExam()">
                                <div class="card-icon">ğŸ“</div>
                                <h3 class="card-title">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯</h3>
                                <p class="card-description">Ø£Ù†Ø´Ø¦ Ø§Ø®ØªØ¨Ø§Ø±Ø§Ù‹ Ø¨ÙƒØ§ÙØ© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯ØŒ ØµØ­/Ø®Ø·Ø£ØŒ Ù…Ø·Ø§Ø¨Ù‚Ø©ØŒ Ø§ÙƒÙ…Ù„ Ø§Ù„ÙØ±Ø§ØºØ§Øª</p>
                            </div>
                            
                            <div class="dashboard-card" onclick="system.loadScanPapers()">
                                <div class="card-icon">ğŸ“·</div>
                                <h3 class="card-title">Ù…Ø³Ø­ Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</h3>
                                <p class="card-description">Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù…Ø³Ø­ Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØªØµØ­ÙŠØ­Ù‡Ø§ Ø¢Ù„ÙŠØ§Ù‹ Ù…Ø¹ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø®Ø· Ø§Ù„ÙŠØ¯ÙˆÙŠ</p>
                            </div>
                            
                            <div class="dashboard-card" onclick="system.loadResults()">
                                <div class="card-icon">ğŸ“Š</div>
                                <h3 class="card-title">Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
                                <p class="card-description">Ø´Ø§Ù‡Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ù„Ø§Ø¨ØŒ Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙØµÙ„Ø©ØŒ ÙˆÙ‚Ù… Ø¨ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¥Ù„Ù‰ Excel</p>
                            </div>
                            
                            <div class="dashboard-card" onclick="system.loadAnswerSheets()">
                                <div class="card-icon">ğŸ–¨ï¸</div>
                                <h3 class="card-title">Ø·Ø¨Ø§Ø¹Ø© Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</h3>
                                <p class="card-description">ØµÙ…Ù… ÙˆØ§Ø·Ø¨Ø¹ Ø£ÙˆØ±Ø§Ù‚ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø®ØµØµØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¨Ù…Ø®ØªÙ„Ù Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</p>
                            </div>
                        </div>
                        
                        <div class="quick-stats">
                            <div class="stat-item">
                                <div class="stat-value">${this.data.exams.length}</div>
                                <div class="stat-label">Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ù†Ø´Ø£Ø©</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${this.data.results.length}</div>
                                <div class="stat-label">Ø·Ø§Ù„Ø¨ ØªÙ… ØªØµØ­ÙŠØ­Ù‡</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${this.data.teachers.length}</div>
                                <div class="stat-label">Ù…Ø¹Ù„Ù… Ù…Ø³Ø¬Ù„</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${new Date().toLocaleDateString('ar-SA')}</div>
                                <div class="stat-label">ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…</div>
                            </div>
                        </div>
                        
                        <div class="footer">
                            <p>Ù†Ø¸Ø§Ù… SamieGrade Ù„Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø¢Ù„ÙŠ Â© 2024</p>
                            <p style="margin-top: 5px; font-size: 0.8rem;">Ø§Ù„Ø¥ØµØ¯Ø§Ø± 2.0 - Ù…Ø¹ Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©</p>
                        </div>
                    </div>
                `;
            }
            
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            logout() {
                this.currentTeacher = null;
                sessionStorage.removeItem('currentTeacher');
                location.reload(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            }
            
            // ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø±
            loadCreateExam() {
                document.body.innerHTML = `
                    <style>
                        /* Ø£Ù†Ù…Ø§Ø· ØµÙØ­Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                        }
                        
                        body {
                            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                            color: #ffffff;
                            min-height: 100vh;
                            padding: 20px;
                        }
                        
                        .exam-container {
                            max-width: 1200px;
                            margin: 0 auto;
                        }
                        
                        .exam-header {
                            background: rgba(255, 255, 255, 0.1);
                            backdrop-filter: blur(10px);
                            border-radius: 15px;
                            padding: 25px;
                            margin-bottom: 30px;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            border: 1px solid rgba(255, 255, 255, 0.1);
                        }
                        
                        .back-btn {
                            background: rgba(255, 255, 255, 0.1);
                            color: #ffffff;
                            border: 1px solid rgba(255, 255, 255, 0.2);
                            padding: 10px 20px;
                            border-radius: 8px;
                            cursor: pointer;
                            font-weight: 600;
                            transition: all 0.3s ease;
                        }
                        
                        .back-btn:hover {
                            background: rgba(255, 255, 255, 0.2);
                            transform: translateY(-2px);
                        }
                        
                        .exam-grid {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 30px;
                        }
                        
                        .exam-form-section {
                            background: rgba(255, 255, 255, 0.08);
                            border-radius: 15px;
                            padding: 30px;
                            border: 1px solid rgba(255, 255, 255, 0.1);
                        }
                        
                        .form-group {
                            margin-bottom: 25px;
                        }
                        
                        .form-group label {
                            display: block;
                            margin-bottom: 10px;
                            color: #cbd5e1;
                            font-weight: 500;
                            font-size: 1.1rem;
                        }
                        
                        .form-control {
                            width: 100%;
                            padding: 15px;
                            background: rgba(255, 255, 255, 0.08);
                            border: 2px solid rgba(255, 255, 255, 0.1);
                            border-radius: 10px;
                            color: #ffffff;
                            font-size: 1rem;
                            transition: all 0.3s ease;
                        }
                        
                        .form-control:focus {
                            outline: none;
                            border-color: #4cc9f0;
                            box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.1);
                        }
                        
                        select.form-control {
                            cursor: pointer;
                        }
                        
                        .question-type-selector {
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 15px;
                            margin-top: 15px;
                        }
                        
                        .type-option {
                            background: rgba(255, 255, 255, 0.05);
                            border: 2px solid rgba(255, 255, 255, 0.1);
                            border-radius: 10px;
                            padding: 20px;
                            text-align: center;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        }
                        
                        .type-option:hover {
                            background: rgba(255, 255, 255, 0.1);
                            transform: translateY(-2px);
                        }
                        
                        .type-option.selected {
                            background: rgba(76, 201, 240, 0.2);
                            border-color: #4cc9f0;
                        }
                        
                        .type-icon {
                            font-size: 2.5rem;
                            margin-bottom: 10px;
                        }
                        
                        .type-name {
                            font-weight: 600;
                            margin-bottom: 5px;
                        }
                        
                        .type-desc {
                            color: #94a3b8;
                            font-size: 0.9rem;
                        }
                        
                        .action-buttons {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 15px;
                            margin-top: 30px;
                        }
                        
                        .btn {
                            padding: 15px;
                            border: none;
                            border-radius: 10px;
                            font-size: 1.1rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 10px;
                        }
                        
                        .btn-primary {
                            background: linear-gradient(135deg, #4cc9f0 0%, #4361ee 100%);
                            color: white;
                        }
                        
                        .btn-primary:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 10px 20px rgba(76, 201, 240, 0.3);
                        }
                        
                        .btn-secondary {
                            background: rgba(255, 255, 255, 0.1);
                            color: white;
                        }
                        
                        .btn-secondary:hover {
                            background: rgba(255, 255, 255, 0.2);
                            transform: translateY(-2px);
                        }
                        
                        @media (max-width: 768px) {
                            .exam-grid {
                                grid-template-columns: 1fr;
                            }
                            
                            .question-type-selector {
                                grid-template-columns: 1fr;
                            }
                        }
                    </style>
                    
                    <div class="exam-container">
                        <div class="exam-header">
                            <h1>ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯</h1>
                            <button class="back-btn" onclick="system.loadDashboard()">â† Ø±Ø¬ÙˆØ¹ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
                        </div>
                        
                        <div class="exam-grid">
                            <div class="exam-form-section">
                                <h2 style="margin-bottom: 25px; color: #4cc9f0;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
                                
                                <div class="form-group">
                                    <label for="exam-title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</label>
                                    <input type="text" id="exam-title" class="form-control" 
                                           placeholder="Ù…Ø«Ø§Ù„: Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="exam-subject">Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</label>
                                    <input type="text" id="exam-subject" class="form-control" 
                                           placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§ØªØŒ Ø§Ù„Ø¹Ù„ÙˆÙ…ØŒ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="exam-grade">Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</label>
                                    <select id="exam-grade" class="form-control">
                                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ØµÙ</option>
                                        <option value="1">Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„</option>
                                        <option value="2">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
                                        <option value="3">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«</option>
                                        <option value="4">Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
                                        <option value="5">Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</option>
                                        <option value="6">Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³</option>
                                        <option value="7">Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¨Ø¹</option>
                                        <option value="8">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù…Ù†</option>
                                        <option value="9">Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹</option>
                                        <option value="10">Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±</option>
                                        <option value="11">Ø§Ù„ØµÙ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±</option>
                                        <option value="12">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="exam-questions">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</label>
                                    <input type="number" id="exam-questions" class="form-control" 
                                           min="1" max="100" value="20" required>
                                </div>
                            </div>
                            
                            <div class="exam-form-section">
                                <h2 style="margin-bottom: 25px; color: #4cc9f0;">Ù†ÙˆØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h2>
                                
                                <div class="question-type-selector">
                                    <div class="type-option selected" onclick="system.selectQuestionType('multiple_choice')">
                                        <div class="type-icon">ğŸ”˜</div>
                                        <div class="type-name">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯</div>
                                        <div class="type-desc">Ø£ØŒ Ø¨ØŒ Ø¬ØŒ Ø¯</div>
                                    </div>
                                    
                                    <div class="type-option" onclick="system.selectQuestionType('true_false')">
                                        <div class="type-icon">âœ“âœ—</div>
                                        <div class="type-name">ØµØ­/Ø®Ø·Ø£</div>
                                        <div class="type-desc">ØµØ­ Ø£Ùˆ Ø®Ø·Ø£</div>
                                    </div>
                                    
                                    <div class="type-option" onclick="system.selectQuestionType('matching')">
                                        <div class="type-icon">â†”ï¸</div>
                                        <div class="type-name">Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©</div>
                                        <div class="type-desc">Ø·Ø§Ø¨Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠÙ†</div>
                                    </div>
                                    
                                    <div class="type-option" onclick="system.selectQuestionType('fill_blank')">
                                        <div class="type-icon">ğŸ“</div>
                                        <div class="type-name">Ø§ÙƒÙ…Ù„ Ø§Ù„ÙØ±Ø§ØºØ§Øª</div>
                                        <div class="type-desc">Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ù†Ø§Ù‚ØµØ©</div>
                                    </div>
                                </div>
                                
                                <div class="form-group" id="mixed-options" style="display: none; margin-top: 20px;">
                                    <label>ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ù„Ù„Ù…Ø®ØªÙ„Ø·)</label>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                        <div>
                                            <input type="number" id="mc-count" class="form-control" 
                                                   placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ" min="0" value="10">
                                            <small style="color: #94a3b8;">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯</small>
                                        </div>
                                        <div>
                                            <input type="number" id="tf-count" class="form-control" 
                                                   placeholder="ØµØ­/Ø®Ø·Ø£" min="0" value="5">
                                            <small style="color: #94a3b8;">ØµØ­/Ø®Ø·Ø£</small>
                                        </div>
                                        <div>
                                            <input type="number" id="match-count" class="form-control" 
                                                   placeholder="Ù…Ø·Ø§Ø¨Ù‚Ø©" min="0" value="3">
                                            <small style="color: #94a3b8;">Ù…Ø·Ø§Ø¨Ù‚Ø©</small>
                                        </div>
                                        <div>
                                            <input type="number" id="fill-count" class="form-control" 
                                                   placeholder="ÙØ±Ø§ØºØ§Øª" min="0" value="2">
                                            <small style="color: #94a3b8;">Ø§ÙƒÙ…Ù„ Ø§Ù„ÙØ±Ø§ØºØ§Øª</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn btn-secondary" onclick="system.loadDashboard()">
                                        Ø¥Ù„ØºØ§Ø¡
                                    </button>
                                    <button class="btn btn-primary" onclick="system.createNewExam()">
                                        âœ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„
            selectQuestionType(type) {
                const options = document.querySelectorAll('.type-option');
                options.forEach(opt => opt.classList.remove('selected'));
                
                const selectedOption = document.querySelector(`.type-option:nth-child(${
                    type === 'multiple_choice' ? 1 : 
                    type === 'true_false' ? 2 : 
                    type === 'matching' ? 3 : 4
                })`);
                
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }
                
                // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„Ø·
                const mixedOptions = document.getElementById('mixed-options');
                if (mixedOptions) {
                    mixedOptions.style.display = type === 'mixed' ? 'block' : 'none';
                }
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
            createNewExam() {
                const title = document.getElementById('exam-title').value.trim();
                const subject = document.getElementById('exam-subject').value.trim();
                const questions = parseInt(document.getElementById('exam-questions').value);
                
                if (!title || !subject || questions < 1) {
                    alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                    return;
                }
                
                const newExam = {
                    id: Date.now().toString(),
                    title: title,
                    subject: subject,
                    grade: document.getElementById('exam-grade').value,
                    questionsCount: questions,
                    teacherId: this.currentTeacher.id,
                    teacherName: this.currentTeacher.name,
                    createdAt: new Date().toISOString(),
                    status: 'draft'
                };
                
                this.data.exams.push(newExam);
                this.saveData();
                
                alert(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± "${title}" Ø¨Ù†Ø¬Ø§Ø­!`);
                this.loadDashboard();
            }
            
            // ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø§Øª Ø£Ø®Ø±Ù‰ (Ù…Ø®ØªØµØ±Ø© Ù„Ù„Ø¹Ø±Ø¶)
            loadScanPapers() {
                this.showComingSoon('ğŸ“· Ù…Ø³Ø­ Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©');
            }
            
            loadResults() {
                this.showComingSoon('ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬');
            }
            
            loadAnswerSheets() {
                this.showComingSoon('ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©');
            }
            
            showComingSoon(feature) {
                document.body.innerHTML = `
                    <style>
                        .coming-soon {
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            min-height: 100vh;
                            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                            color: white;
                            text-align: center;
                            padding: 20px;
                        }
                        
                        .content {
                            max-width: 500px;
                        }
                        
                        .icon {
                            font-size: 5rem;
                            margin-bottom: 20px;
                        }
                        
                        h1 {
                            color: #4cc9f0;
                            margin-bottom: 20px;
                        }
                        
                        p {
                            color: #94a3b8;
                            margin-bottom: 30px;
                            line-height: 1.6;
                        }
                        
                        .back-btn {
                            background: rgba(76, 201, 240, 0.2);
                            color: #4cc9f0;
                            border: 2px solid #4cc9f0;
                            padding: 15px 30px;
                            border-radius: 10px;
                            font-size: 1.1rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        }
                        
                        .back-btn:hover {
                            background: rgba(76, 201, 240, 0.3);
                            transform: translateY(-2px);
                        }
                    </style>
                    
                    <div class="coming-soon">
                        <div class="content">
                            <div class="icon">ğŸš§</div>
                            <h1>${feature}</h1>
                            <p>Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø­Ø§Ù„ÙŠØ§Ù‹ ÙˆØ³ÙŠØªÙ… Ø¥Ø·Ù„Ø§Ù‚Ù‡Ø§ Ù‚Ø±ÙŠØ¨Ø§Ù‹ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.</p>
                            <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
                            <button class="back-btn" onclick="system.loadDashboard()" style="margin-top: 20px;">
                                â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                            </button>
                        </div>
                    </div>
                `;
            }
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…
        const system = new SamieGradeSystem();
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø­Ø¯Ø« ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.addEventListener('submit', function(event) {
                    system.handleLogin(event);
                });
            }
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª
            const savedTeacher = sessionStorage.getItem('currentTeacher');
            if (savedTeacher) {
                system.currentTeacher = JSON.parse(savedTeacher);
                system.loadDashboard();
            }
        });
        
        // Ø¬Ø¹Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ØªØ§Ø­Ø§Ù‹ Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹
        window.system = system;
    </script>
</body>
</
